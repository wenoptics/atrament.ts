define("atramentJs",[],(function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=4)}([function(t,e){const s={floodFillInterval:100,maxLineThickness:50,minLineThickness:1};s.lineThicknessRange=s.maxLineThickness-s.minLineThickness,s.thicknessIncrement=.5,s.minSmoothingFactor=.87,s.initialSmoothingFactor=.85,s.weightSpread=10,s.initialThickness=2,t.exports=s},function(t,e){e.lineDistance=(t,e,s,i)=>{const n=Math.pow(s-t,2),o=Math.pow(i-e,2);return Math.sqrt(n+o)},e.hexToRgb=t=>{const e=t.match(/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]},e.matchColor=(t,e,s,i,n)=>o=>{const r=t[o],h=t[o+1],a=t[o+2],c=t[o+3];return r===e&&h===s&&a===i&&c===n},e.colorPixel=(t,s,i,n,o,r)=>{const h=e.matchColor(t,...o);return e=>{t[e]=s,t[e+1]=i,t[e+2]=n,t[e+3]=r,h(e+4)||(t[e+4]=.01*t[e+4]+.99*s,t[e+4+1]=.01*t[e+4+1]+.99*i,t[e+4+2]=.01*t[e+4+2]+.99*n,t[e+4+3]=.01*t[e+4+3]+.99*r),h(e-4)||(t[e-4]=.01*t[e-4]+.99*s,t[e-4+1]=.01*t[e-4+1]+.99*i,t[e-4+2]=.01*t[e-4+2]+.99*n,t[e-4+3]=.01*t[e-4+3]+.99*r)}}},function(t,e){class s{constructor(t,e){this.x=t,this.y=e}set(t,e){this.x=t,this.y=e}}t.exports={Mouse:class extends s{constructor(){super(0,0),this.down=!1,this.previous=new s(0,0)}},Point:s}},function(t,e){t.exports={AtramentEventTarget:class{constructor(){this.eventListeners=new Map}addEventListener(t,e){const s=this.eventListeners.get(t)||new Set;s.add(e),this.eventListeners.set(t,s)}removeEventListener(t,e){const s=this.eventListeners.get(t);s&&s.delete(e)}dispatchEvent(t,e){const s=this.eventListeners.get(t);s&&[...s].forEach(t=>t(e))}}}},function(t,e,s){t.exports=s(5)},function(t,e,s){"use strict";s.r(e);var i=s(2),n=s(0),o=s.n(n),r=s(1),h=s.n(r),a=s(3);const c={DRAW:"draw",ERASE:"erase",FILL:"fill",DISABLED:"disabled"},d=[c.DRAW,c.ERASE];class l extends a.AtramentEventTarget{constructor(t,e={}){if("undefined"==typeof window)throw new Error("Looks like we're not running in a browser");if(super(),t instanceof window.Node&&"CANVAS"===t.tagName)this.canvas=t;else{if("string"!=typeof t)throw new Error(`can't look for canvas based on '${t}'`);this.canvas=document.querySelector(t)}if(!this.canvas)throw new Error("canvas not found");this.canvas.width=e.width||this.canvas.width,this.canvas.height=e.height||this.canvas.height,this.mouse=new i.Mouse;const s=t=>{t.cancelable&&t.preventDefault();const e=this.canvas.getBoundingClientRect(),s=t.changedTouches&&t.changedTouches[0]||t;let i=s.offsetX,n=s.offsetY;void 0===i&&(i=s.clientX-e.left),void 0===n&&(n=s.clientY-e.top);const{mouse:o}=this;if(o.down&&d.includes(this.mode)){const{x:t,y:e}=this.draw(i,n,o.previous.x,o.previous.y);this._dirty||this.mode!==c.DRAW||i===o.x&&n===o.y||(this._dirty=!0,this.fireDirty()),o.set(i,n),o.previous.set(t,e)}else o.set(i,n)},n=t=>{if(t.cancelable&&t.preventDefault(),s(t),this.mode===c.FILL)return void this.fill();const{mouse:e}=this;e.previous.set(e.x,e.y),e.down=!0,this.beginStroke(e.previous.x,e.previous.y)},r=t=>{if(this.mode===c.FILL)return;const{mouse:e}=this;if(!e.down)return;const s=t.changedTouches&&t.changedTouches[0]||t,i=s.offsetX,n=s.offsetY;if(e.down=!1,e.x===i&&e.y===n&&d.includes(this.mode)){const{x:t,y:s}=this.draw(e.x,e.y,e.previous.x,e.previous.y);e.previous.set(t,s)}this.endStroke(e.x,e.y)};this.canvas.addEventListener("mousemove",s),this.canvas.addEventListener("mousedown",n),document.addEventListener("mouseup",r),this.canvas.addEventListener("touchstart",n),this.canvas.addEventListener("touchend",r),this.canvas.addEventListener("touchmove",s),this.destroy=()=>{this.clear(),this.canvas.removeEventListener("mousemove",s),this.canvas.removeEventListener("mousedown",n),document.removeEventListener("mouseup",r),this.canvas.removeEventListener("touchstart",n),this.canvas.removeEventListener("touchend",r),this.canvas.removeEventListener("touchmove",s)},this.context=this.canvas.getContext("2d"),this.context.globalCompositeOperation="source-over",this.context.globalAlpha=1,this.context.strokeStyle=e.color||"rgba(0,0,0,1)",this.context.lineCap="round",this.context.lineJoin="round",this.context.translate(.5,.5),this._filling=!1,this._fillStack=[],this.recordStrokes=!1,this.strokeMemory=[],this.smoothing=o.a.initialSmoothingFactor,this._thickness=o.a.initialThickness,this._targetThickness=this._thickness,this._weight=this._thickness,this._maxWeight=this._thickness+o.a.weightSpread,this._mode=c.DRAW,this.adaptiveStroke=!0,["weight","smoothing","adaptiveStroke","mode"].forEach(t=>void 0===e[t]?0:this[t]=e[t])}beginStroke(t,e){this.context.beginPath(),this.context.moveTo(t,e),this.recordStrokes&&(this.strokeTimestamp=performance.now(),this.strokeMemory.push({point:new i.Point(t,e),time:performance.now()-this.strokeTimestamp})),this.dispatchEvent("strokestart",{x:t,y:e})}endStroke(t,e){if(this.context.closePath(),this.recordStrokes&&this.strokeMemory.push({point:new i.Point(t,e),time:performance.now()-this.strokeTimestamp}),this.dispatchEvent("strokeend",{x:t,y:e}),this.recordStrokes){const t={points:this.strokeMemory.slice(),mode:this.mode,weight:this.weight,smoothing:this.smoothing,color:this.color,adaptiveStroke:this.adaptiveStroke};this.dispatchEvent("strokerecorded",{stroke:t})}this.strokeMemory=[],delete this.strokeTimestamp}draw(t,e,s,n){this.recordStrokes&&this.strokeMemory.push({point:new i.Point(t,e),time:performance.now()-this.strokeTimestamp});const{context:r}=this,a=h.a.lineDistance(t,e,s,n),c=Math.min(o.a.minSmoothingFactor,this.smoothing+(a-60)/3e3),d=t-(t-s)*c,l=e-(e-n)*c,u=h.a.lineDistance(d,l,s,n);return this.adaptiveStroke?(this._targetThickness=(u-o.a.minLineThickness)/o.a.lineThicknessRange*(this._maxWeight-this._weight)+this._weight,this._thickness>this._targetThickness?this._thickness-=o.a.thicknessIncrement:this._thickness<this._targetThickness&&(this._thickness+=o.a.thicknessIncrement),r.lineWidth=this._thickness):r.lineWidth=this._weight,r.quadraticCurveTo(s,n,d,l),r.stroke(),{x:d,y:l}}get color(){return this.context.strokeStyle}set color(t){if("string"!=typeof t)throw new Error("wrong argument type");this.context.strokeStyle=t}get weight(){return this._weight}set weight(t){if("number"!=typeof t)throw new Error("wrong argument type");this._weight=t,this._thickness=t,this._targetThickness=t,this._maxWeight=t+o.a.weightSpread}get mode(){return this._mode}set mode(t){if("string"!=typeof t)throw new Error("wrong argument type");switch(t){case c.ERASE:this._mode=c.ERASE,this.context.globalCompositeOperation="destination-out";break;case c.FILL:this._mode=c.FILL,this.context.globalCompositeOperation="source-over";break;case c.DISABLED:this._mode=c.DISABLED;break;default:this._mode=c.DRAW,this.context.globalCompositeOperation="source-over"}}isDirty(){return!!this._dirty}fireDirty(){this.dispatchEvent("dirty")}clear(){this.isDirty&&(this._dirty=!1,this.dispatchEvent("clean"),this.mode===c.ERASE?(this.mode=c.DRAW,this.context.clearRect(-10,-10,this.canvas.width+20,this.canvas.height+20),this.mode=c.ERASE):this.context.clearRect(-10,-10,this.canvas.width+20,this.canvas.height+20))}toImage(){return this.canvas.toDataURL()}fill(){const{mouse:t}=this,{context:e}=this,s=Array.from(e.getImageData(t.x,t.y,1,1).data);if(this._filling)this._fillStack.push([t.x,t.y,s]);else{const{x:e,y:i}=t;this.dispatchEvent("fillstart",{x:e,y:i}),this._filling=!0,setTimeout(()=>{this._floodFill(t.x,t.y,s)},o.a.floodFillInterval)}}_floodFill(t,e,s){const{context:i}=this,n=Math.floor(t),o=Math.floor(e),r=i.canvas.width,a=i.canvas.height,c=[[n,o]],d=h.a.hexToRgb(this.color),l=i.getImageData(0,0,i.canvas.width,i.canvas.height),u=Math.min(10*i.globalAlpha*255,255),m=h.a.colorPixel(l.data,...d,s,u),v=h.a.matchColor(l.data,...s);if(h.a.matchColor(l.data,...d,255)(4*(o*i.canvas.width+n)))return this._filling=!1,void this.dispatchEvent("fillend",{});for(;c.length;){const t=c.pop(),e=t[0];let s=t[1],i=4*(s*r+e);for(;s-- >=0&&v(i);)i-=4*r;i+=4*r,++s;let n=!1,o=!1;for(;s++<a-1&&v(i);)m(i),e>0&&(v(i-4)?n||(c.push([e-1,s]),n=!0):n&&(n=!1)),e<r-1&&(v(i+4)?o||(c.push([e+1,s]),o=!0):o&&(o=!1)),i+=4*r}i.putImageData(l,0,0),this._fillStack.length?this._floodFill(...this._fillStack.shift()):(this._filling=!1,this.dispatchEvent("fillend",{}))}}s.d(e,"Atrament",(function(){return l}))}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdHJhbWVudEpzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2F0cmFtZW50SnMvLi9zcmMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2F0cmFtZW50SnMvLi9zcmMvcGl4ZWxzLmpzIiwid2VicGFjazovL2F0cmFtZW50SnMvLi9zcmMvbW91c2UuanMiLCJ3ZWJwYWNrOi8vYXRyYW1lbnRKcy8uL3NyYy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vYXRyYW1lbnRKcy8uL3NyYy9hdHJhbWVudC5qcyIsIndlYnBhY2s6Ly9hdHJhbWVudEpzLy4vaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDIiwibGluZVRoaWNrbmVzc1JhbmdlIiwibWF4TGluZVRoaWNrbmVzcyIsIm1pbkxpbmVUaGlja25lc3MiLCJ0aGlja25lc3NJbmNyZW1lbnQiLCJtaW5TbW9vdGhpbmdGYWN0b3IiLCJpbml0aWFsU21vb3RoaW5nRmFjdG9yIiwid2VpZ2h0U3ByZWFkIiwiaW5pdGlhbFRoaWNrbmVzcyIsImxpbmVEaXN0YW5jZSIsIngxIiwieTEiLCJ4MiIsInkyIiwieHMiLCJNYXRoIiwicG93IiwieXMiLCJzcXJ0IiwiaGV4VG9SZ2IiLCJoZXhDb2xvciIsIm1hdGNoIiwicGFyc2VJbnQiLCJtYXRjaENvbG9yIiwiZGF0YSIsImNvbXBSIiwiY29tcEciLCJjb21wQiIsImNvbXBBIiwicGl4ZWxQb3MiLCJnIiwiYiIsImEiLCJjb2xvclBpeGVsIiwiZmlsbFIiLCJmaWxsRyIsImZpbGxCIiwic3RhcnRDb2xvciIsImFscGhhIiwibWF0Y2hlciIsIlBvaW50IiwieCIsInkiLCJ0aGlzIiwiTW91c2UiLCJzdXBlciIsImRvd24iLCJwcmV2aW91cyIsIkF0cmFtZW50RXZlbnRUYXJnZXQiLCJldmVudExpc3RlbmVycyIsIk1hcCIsImV2ZW50TmFtZSIsImhhbmRsZXIiLCJoYW5kbGVycyIsIlNldCIsImFkZCIsInNldCIsImRlbGV0ZSIsImZvckVhY2giLCJEcmF3aW5nTW9kZSIsIkRSQVciLCJFUkFTRSIsIkZJTEwiLCJESVNBQkxFRCIsIlBhdGhEcmF3aW5nTW9kZXMiLCJzZWxlY3RvciIsImNvbmZpZyIsIndpbmRvdyIsIkVycm9yIiwiTm9kZSIsInRhZ05hbWUiLCJjYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3aWR0aCIsImhlaWdodCIsIm1vdXNlIiwibW91c2VNb3ZlIiwiZXZlbnQiLCJjYW5jZWxhYmxlIiwicHJldmVudERlZmF1bHQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicG9zaXRpb24iLCJjaGFuZ2VkVG91Y2hlcyIsIm9mZnNldFgiLCJvZmZzZXRZIiwiY2xpZW50WCIsImxlZnQiLCJjbGllbnRZIiwidG9wIiwiaW5jbHVkZXMiLCJuZXdYIiwibmV3WSIsImRyYXciLCJfZGlydHkiLCJmaXJlRGlydHkiLCJtb3VzZURvd24iLCJmaWxsIiwiYmVnaW5TdHJva2UiLCJtb3VzZVVwIiwiZSIsIm54IiwibnkiLCJlbmRTdHJva2UiLCJhZGRFdmVudExpc3RlbmVyIiwiZGVzdHJveSIsImNsZWFyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uIiwiZ2xvYmFsQWxwaGEiLCJzdHJva2VTdHlsZSIsImNvbG9yIiwibGluZUNhcCIsImxpbmVKb2luIiwidHJhbnNsYXRlIiwiX2ZpbGxpbmciLCJfZmlsbFN0YWNrIiwicmVjb3JkU3Ryb2tlcyIsInN0cm9rZU1lbW9yeSIsInNtb290aGluZyIsIl90aGlja25lc3MiLCJfdGFyZ2V0VGhpY2tuZXNzIiwiX3dlaWdodCIsIl9tYXhXZWlnaHQiLCJfbW9kZSIsImFkYXB0aXZlU3Ryb2tlIiwidW5kZWZpbmVkIiwiYmVnaW5QYXRoIiwibW92ZVRvIiwic3Ryb2tlVGltZXN0YW1wIiwicGVyZm9ybWFuY2UiLCJub3ciLCJwdXNoIiwicG9pbnQiLCJ0aW1lIiwiZGlzcGF0Y2hFdmVudCIsImNsb3NlUGF0aCIsInN0cm9rZSIsInBvaW50cyIsInNsaWNlIiwid2VpZ2h0IiwicHJldlgiLCJwcmV2WSIsInJhd0Rpc3QiLCJzbW9vdGhpbmdGYWN0b3IiLCJtaW4iLCJwcm9jWCIsInByb2NZIiwiZGlzdCIsImxpbmVXaWR0aCIsInF1YWRyYXRpY0N1cnZlVG8iLCJ3IiwiaXNEaXJ0eSIsImNsZWFyUmVjdCIsInRvRGF0YVVSTCIsIkFycmF5IiwiZnJvbSIsImdldEltYWdlRGF0YSIsInNldFRpbWVvdXQiLCJfZmxvb2RGaWxsIiwiZmxvb2RGaWxsSW50ZXJ2YWwiLCJfc3RhcnRYIiwiX3N0YXJ0WSIsInN0YXJ0WCIsImZsb29yIiwic3RhcnRZIiwiY2FudmFzV2lkdGgiLCJjYW52YXNIZWlnaHQiLCJwaXhlbFN0YWNrIiwiZmlsbENvbG9yIiwiY29sb3JMYXllciIsIm1hdGNoRmlsbENvbG9yIiwibGVuZ3RoIiwibmV3UG9zIiwicG9wIiwicmVhY2hMZWZ0IiwicmVhY2hSaWdodCIsInB1dEltYWdlRGF0YSIsInNoaWZ0Il0sIm1hcHBpbmdzIjoic0RBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdB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LEVBQVdNLEVBQVcsR0FDbkJzSixJQUNIUixFQUFXcEMsS0FBSyxDQUFDOUYsRUFBSSxFQUFHQyxJQUN4QnlJLEdBQWEsR0FHUkEsSUFDUEEsR0FBYSxJQUlqQnRKLEdBQTBCLEVBQWQ0SSxFQUtoQjVELEVBQVF1RSxhQUFhUCxFQUFZLEVBQUcsR0FFaENsSSxLQUFLNEUsV0FBV3dELE9BQ2xCcEksS0FBS3VILGNBQWN2SCxLQUFLNEUsV0FBVzhELFVBR25DMUksS0FBSzJFLFVBQVcsRUFDaEIzRSxLQUFLK0YsY0FBYyxVQUFXLE1DL2JwQyIsImZpbGUiOiJhdHJhbWVudC5hbWQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQpO1xuIiwiY29uc3QgQyA9IHt9O1xuQy5mbG9vZEZpbGxJbnRlcnZhbCA9IDEwMDtcbkMubWF4TGluZVRoaWNrbmVzcyA9IDUwO1xuQy5taW5MaW5lVGhpY2tuZXNzID0gMTtcbkMubGluZVRoaWNrbmVzc1JhbmdlID0gQy5tYXhMaW5lVGhpY2tuZXNzIC0gQy5taW5MaW5lVGhpY2tuZXNzO1xuQy50aGlja25lc3NJbmNyZW1lbnQgPSAwLjU7XG5DLm1pblNtb290aGluZ0ZhY3RvciA9IDAuODc7XG5DLmluaXRpYWxTbW9vdGhpbmdGYWN0b3IgPSAwLjg1O1xuQy53ZWlnaHRTcHJlYWQgPSAxMDtcbkMuaW5pdGlhbFRoaWNrbmVzcyA9IDI7XG5cbm1vZHVsZS5leHBvcnRzID0gQztcbiIsImV4cG9ydHMubGluZURpc3RhbmNlID0gKHgxLCB5MSwgeDIsIHkyKSA9PiB7XG4gIC8vIGNhbGN1bGF0ZSBldWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiAoeDEsIHkxKSBhbmQgKHgyLCB5MilcbiAgY29uc3QgeHMgPSBNYXRoLnBvdyh4MiAtIHgxLCAyKTtcbiAgY29uc3QgeXMgPSBNYXRoLnBvdyh5MiAtIHkxLCAyKTtcbiAgcmV0dXJuIE1hdGguc3FydCh4cyArIHlzKTtcbn07XG5cbmV4cG9ydHMuaGV4VG9SZ2IgPSAoaGV4Q29sb3IpID0+IHtcbiAgLy8gU2luY2UgaW5wdXQgdHlwZSBjb2xvciBwcm92aWRlcyBoZXggYW5kIEltYWdlRGF0YSBhY2NlcHRzIFJHQiBuZWVkIHRvIHRyYW5zZm9ybVxuICBjb25zdCBtID0gaGV4Q29sb3IubWF0Y2goL14jPyhbXFxkYS1mXXsyfSkoW1xcZGEtZl17Mn0pKFtcXGRhLWZdezJ9KSQvaSk7XG4gIHJldHVybiBbXG4gICAgcGFyc2VJbnQobVsxXSwgMTYpLFxuICAgIHBhcnNlSW50KG1bMl0sIDE2KSxcbiAgICBwYXJzZUludChtWzNdLCAxNilcbiAgXTtcbn07XG5cbmV4cG9ydHMubWF0Y2hDb2xvciA9IChkYXRhLCBjb21wUiwgY29tcEcsIGNvbXBCLCBjb21wQSkgPT4gKHBpeGVsUG9zKSA9PiB7XG4gIC8vIFBpeGVsIGNvbG9yIGVxdWFscyBjb21wIGNvbG9yP1xuICBjb25zdCByID0gZGF0YVtwaXhlbFBvc107XG4gIGNvbnN0IGcgPSBkYXRhW3BpeGVsUG9zICsgMV07XG4gIGNvbnN0IGIgPSBkYXRhW3BpeGVsUG9zICsgMl07XG4gIGNvbnN0IGEgPSBkYXRhW3BpeGVsUG9zICsgM107XG5cbiAgcmV0dXJuIChyID09PSBjb21wUiAmJiBnID09PSBjb21wRyAmJiBiID09PSBjb21wQiAmJiBhID09PSBjb21wQSk7XG59O1xuXG5leHBvcnRzLmNvbG9yUGl4ZWwgPSAoZGF0YSwgZmlsbFIsIGZpbGxHLCBmaWxsQiwgc3RhcnRDb2xvciwgYWxwaGEpID0+IHtcbiAgY29uc3QgbWF0Y2hlciA9IGV4cG9ydHMubWF0Y2hDb2xvcihkYXRhLCAuLi5zdGFydENvbG9yKTtcblxuICByZXR1cm4gKHBpeGVsUG9zKSA9PiB7XG4gICAgLy8gVXBkYXRlIGZpbGwgY29sb3IgaW4gbWF0cml4XG4gICAgZGF0YVtwaXhlbFBvc10gPSBmaWxsUjtcbiAgICBkYXRhW3BpeGVsUG9zICsgMV0gPSBmaWxsRztcbiAgICBkYXRhW3BpeGVsUG9zICsgMl0gPSBmaWxsQjtcbiAgICBkYXRhW3BpeGVsUG9zICsgM10gPSBhbHBoYTtcblxuICAgIGlmICghbWF0Y2hlcihwaXhlbFBvcyArIDQpKSB7XG4gICAgICBkYXRhW3BpeGVsUG9zICsgNF0gPSBkYXRhW3BpeGVsUG9zICsgNF0gKiAwLjAxICsgZmlsbFIgKiAwLjk5O1xuICAgICAgZGF0YVtwaXhlbFBvcyArIDQgKyAxXSA9IGRhdGFbcGl4ZWxQb3MgKyA0ICsgMV0gKiAwLjAxICsgZmlsbEcgKiAwLjk5O1xuICAgICAgZGF0YVtwaXhlbFBvcyArIDQgKyAyXSA9IGRhdGFbcGl4ZWxQb3MgKyA0ICsgMl0gKiAwLjAxICsgZmlsbEIgKiAwLjk5O1xuICAgICAgZGF0YVtwaXhlbFBvcyArIDQgKyAzXSA9IGRhdGFbcGl4ZWxQb3MgKyA0ICsgM10gKiAwLjAxICsgYWxwaGEgKiAwLjk5O1xuICAgIH1cblxuICAgIGlmICghbWF0Y2hlcihwaXhlbFBvcyAtIDQpKSB7XG4gICAgICBkYXRhW3BpeGVsUG9zIC0gNF0gPSBkYXRhW3BpeGVsUG9zIC0gNF0gKiAwLjAxICsgZmlsbFIgKiAwLjk5O1xuICAgICAgZGF0YVtwaXhlbFBvcyAtIDQgKyAxXSA9IGRhdGFbcGl4ZWxQb3MgLSA0ICsgMV0gKiAwLjAxICsgZmlsbEcgKiAwLjk5O1xuICAgICAgZGF0YVtwaXhlbFBvcyAtIDQgKyAyXSA9IGRhdGFbcGl4ZWxQb3MgLSA0ICsgMl0gKiAwLjAxICsgZmlsbEIgKiAwLjk5O1xuICAgICAgZGF0YVtwaXhlbFBvcyAtIDQgKyAzXSA9IGRhdGFbcGl4ZWxQb3MgLSA0ICsgM10gKiAwLjAxICsgYWxwaGEgKiAwLjk5O1xuICAgIH1cbiAgfTtcbn07XG4iLCIvLyBtYWtlIGEgY2xhc3MgZm9yIFBvaW50XG5jbGFzcyBQb2ludCB7XG4gIGNvbnN0cnVjdG9yKHgsIHkpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gIH1cblxuICBzZXQoeCwgeSkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgfVxufVxuXG4vLyBtYWtlIGEgY2xhc3MgZm9yIHRoZSBtb3VzZSBkYXRhXG5jbGFzcyBNb3VzZSBleHRlbmRzIFBvaW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoMCwgMCk7XG4gICAgdGhpcy5kb3duID0gZmFsc2U7XG4gICAgdGhpcy5wcmV2aW91cyA9IG5ldyBQb2ludCgwLCAwKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgTW91c2UsIFBvaW50IH07XG4iLCJjbGFzcyBBdHJhbWVudEV2ZW50VGFyZ2V0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IG5ldyBNYXAoKTtcbiAgfVxuXG4gIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKSB7XG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudE5hbWUpIHx8IG5ldyBTZXQoKTtcbiAgICBoYW5kbGVycy5hZGQoaGFuZGxlcik7XG4gICAgdGhpcy5ldmVudExpc3RlbmVycy5zZXQoZXZlbnROYW1lLCBoYW5kbGVycyk7XG4gIH1cblxuICByZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnROYW1lKTtcbiAgICBpZiAoIWhhbmRsZXJzKSByZXR1cm47XG4gICAgaGFuZGxlcnMuZGVsZXRlKGhhbmRsZXIpO1xuICB9XG5cbiAgZGlzcGF0Y2hFdmVudChldmVudE5hbWUsIGRhdGEpIHtcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSk7XG4gICAgaWYgKCFoYW5kbGVycykgcmV0dXJuO1xuICAgIFsuLi5oYW5kbGVyc10uZm9yRWFjaChoYW5kbGVyID0+IGhhbmRsZXIoZGF0YSkpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBBdHJhbWVudEV2ZW50VGFyZ2V0IH07XG4iLCJpbXBvcnQgeyBNb3VzZSwgUG9pbnQgfSBmcm9tICcuL21vdXNlLmpzJztcbmltcG9ydCBDb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IFBpeGVscyBmcm9tICcuL3BpeGVscy5qcyc7XG5pbXBvcnQgeyBBdHJhbWVudEV2ZW50VGFyZ2V0IH0gZnJvbSAnLi9ldmVudHMuanMnO1xuXG5cbmNvbnN0IERyYXdpbmdNb2RlID0ge1xuICBEUkFXOiAnZHJhdycsXG4gIEVSQVNFOiAnZXJhc2UnLFxuICBGSUxMOiAnZmlsbCcsXG4gIERJU0FCTEVEOiAnZGlzYWJsZWQnXG59O1xuXG5jb25zdCBQYXRoRHJhd2luZ01vZGVzID0gW0RyYXdpbmdNb2RlLkRSQVcsIERyYXdpbmdNb2RlLkVSQVNFXTtcblxuY2xhc3MgQXRyYW1lbnQgZXh0ZW5kcyBBdHJhbWVudEV2ZW50VGFyZ2V0IHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIGNvbmZpZyA9IHt9KSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xvb2tzIGxpa2Ugd2VcXCdyZSBub3QgcnVubmluZyBpbiBhIGJyb3dzZXInKTtcbiAgICB9XG5cbiAgICBzdXBlcigpO1xuXG4gICAgLy8gZ2V0IGNhbnZhcyBlbGVtZW50XG4gICAgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2Ygd2luZG93Lk5vZGUgJiYgc2VsZWN0b3IudGFnTmFtZSA9PT0gJ0NBTlZBUycpIHRoaXMuY2FudmFzID0gc2VsZWN0b3I7XG4gICAgZWxzZSBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICBlbHNlIHRocm93IG5ldyBFcnJvcihgY2FuJ3QgbG9vayBmb3IgY2FudmFzIGJhc2VkIG9uICcke3NlbGVjdG9yfSdgKTtcbiAgICBpZiAoIXRoaXMuY2FudmFzKSB0aHJvdyBuZXcgRXJyb3IoJ2NhbnZhcyBub3QgZm91bmQnKTtcblxuICAgIC8vIHNldCBleHRlcm5hbCBjYW52YXMgcGFyYW1zXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSBjb25maWcud2lkdGggfHwgdGhpcy5jYW52YXMud2lkdGg7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gY29uZmlnLmhlaWdodCB8fCB0aGlzLmNhbnZhcy5oZWlnaHQ7XG5cbiAgICAvLyBjcmVhdGUgYSBtb3VzZSBvYmplY3RcbiAgICB0aGlzLm1vdXNlID0gbmV3IE1vdXNlKCk7XG5cbiAgICAvLyBtb3VzZW1vdmUgaGFuZGxlclxuICAgIGNvbnN0IG1vdXNlTW92ZSA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmNhbmNlbGFibGUpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVjdCA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBldmVudC5jaGFuZ2VkVG91Y2hlcyAmJiBldmVudC5jaGFuZ2VkVG91Y2hlc1swXSB8fCBldmVudDtcbiAgICAgIGxldCB4ID0gcG9zaXRpb24ub2Zmc2V0WDtcbiAgICAgIGxldCB5ID0gcG9zaXRpb24ub2Zmc2V0WTtcblxuICAgICAgaWYgKHR5cGVvZiB4ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB4ID0gcG9zaXRpb24uY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgeSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgeSA9IHBvc2l0aW9uLmNsaWVudFkgLSByZWN0LnRvcDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBtb3VzZSB9ID0gdGhpcztcbiAgICAgIC8vIGRyYXcgaWYgd2Ugc2hvdWxkIGRyYXdcbiAgICAgIGlmIChtb3VzZS5kb3duICYmIFBhdGhEcmF3aW5nTW9kZXMuaW5jbHVkZXModGhpcy5tb2RlKSkge1xuICAgICAgICBjb25zdCB7IHg6IG5ld1gsIHk6IG5ld1kgfSA9IHRoaXMuZHJhdyh4LCB5LCBtb3VzZS5wcmV2aW91cy54LCBtb3VzZS5wcmV2aW91cy55KTtcblxuICAgICAgICBpZiAoIXRoaXMuX2RpcnR5ICYmIHRoaXMubW9kZSA9PT0gRHJhd2luZ01vZGUuRFJBVyAmJiAoeCAhPT0gbW91c2UueCB8fCB5ICE9PSBtb3VzZS55KSkge1xuICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmZpcmVEaXJ0eSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgbW91c2Uuc2V0KHgsIHkpO1xuICAgICAgICBtb3VzZS5wcmV2aW91cy5zZXQobmV3WCwgbmV3WSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbW91c2Uuc2V0KHgsIHkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBtb3VzZWRvd24gaGFuZGxlclxuICAgIGNvbnN0IG1vdXNlRG93biA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmNhbmNlbGFibGUpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIC8vIHVwZGF0ZSBwb3NpdGlvbiBqdXN0IGluIGNhc2VcbiAgICAgIG1vdXNlTW92ZShldmVudCk7XG5cbiAgICAgIC8vIGlmIHdlIGFyZSBmaWxsaW5nIC0gZmlsbCBhbmQgcmV0dXJuXG4gICAgICBpZiAodGhpcy5tb2RlID09PSBEcmF3aW5nTW9kZS5GSUxMKSB7XG4gICAgICAgIHRoaXMuZmlsbCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyByZW1lbWJlciBpdFxuICAgICAgY29uc3QgeyBtb3VzZSB9ID0gdGhpcztcbiAgICAgIG1vdXNlLnByZXZpb3VzLnNldChtb3VzZS54LCBtb3VzZS55KTtcbiAgICAgIG1vdXNlLmRvd24gPSB0cnVlO1xuXG4gICAgICB0aGlzLmJlZ2luU3Ryb2tlKG1vdXNlLnByZXZpb3VzLngsIG1vdXNlLnByZXZpb3VzLnkpO1xuICAgIH07XG5cbiAgICBjb25zdCBtb3VzZVVwID0gKGUpID0+IHtcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09IERyYXdpbmdNb2RlLkZJTEwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IG1vdXNlIH0gPSB0aGlzO1xuXG4gICAgICBpZiAoIW1vdXNlLmRvd24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwb3NpdGlvbiA9IGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlc1swXSB8fCBlO1xuICAgICAgY29uc3QgeCA9IHBvc2l0aW9uLm9mZnNldFg7XG4gICAgICBjb25zdCB5ID0gcG9zaXRpb24ub2Zmc2V0WTtcbiAgICAgIG1vdXNlLmRvd24gPSBmYWxzZTtcblxuICAgICAgaWYgKG1vdXNlLnggPT09IHggJiYgbW91c2UueSA9PT0geSAmJiBQYXRoRHJhd2luZ01vZGVzLmluY2x1ZGVzKHRoaXMubW9kZSkpIHtcbiAgICAgICAgY29uc3QgeyB4OiBueCwgeTogbnkgfSA9IHRoaXMuZHJhdyhtb3VzZS54LCBtb3VzZS55LCBtb3VzZS5wcmV2aW91cy54LCBtb3VzZS5wcmV2aW91cy55KTtcbiAgICAgICAgbW91c2UucHJldmlvdXMuc2V0KG54LCBueSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZW5kU3Ryb2tlKG1vdXNlLngsIG1vdXNlLnkpO1xuICAgIH07XG5cbiAgICAvLyBhdHRhY2ggbGlzdGVuZXJzXG4gICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW91c2VNb3ZlKTtcbiAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBtb3VzZURvd24pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwKTtcbiAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgbW91c2VEb3duKTtcbiAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG1vdXNlVXApO1xuICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG1vdXNlTW92ZSk7XG5cbiAgICAvLyBoZWxwZXIgZm9yIGRlc3Ryb3lpbmcgQXRyYW1lbnQgKHJlbW92aW5nIGV2ZW50IGxpc3RlbmVycylcbiAgICB0aGlzLmRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICB0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmUpO1xuICAgICAgdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgbW91c2VEb3duKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwKTtcbiAgICAgIHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBtb3VzZURvd24pO1xuICAgICAgdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBtb3VzZVVwKTtcbiAgICAgIHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG1vdXNlTW92ZSk7XG4gICAgfTtcblxuICAgIC8vIHNldCBpbnRlcm5hbCBjYW52YXMgcGFyYW1zXG4gICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcbiAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxO1xuICAgIHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbmZpZy5jb2xvciB8fCAncmdiYSgwLDAsMCwxKSc7XG4gICAgdGhpcy5jb250ZXh0LmxpbmVDYXAgPSAncm91bmQnO1xuICAgIHRoaXMuY29udGV4dC5saW5lSm9pbiA9ICdyb3VuZCc7XG4gICAgdGhpcy5jb250ZXh0LnRyYW5zbGF0ZSgwLjUsIDAuNSk7XG5cbiAgICB0aGlzLl9maWxsaW5nID0gZmFsc2U7XG4gICAgdGhpcy5fZmlsbFN0YWNrID0gW107XG5cbiAgICAvLyBzZXQgZHJhd2luZyBwYXJhbXNcbiAgICB0aGlzLnJlY29yZFN0cm9rZXMgPSBmYWxzZTtcbiAgICB0aGlzLnN0cm9rZU1lbW9yeSA9IFtdO1xuXG4gICAgdGhpcy5zbW9vdGhpbmcgPSBDb25zdGFudHMuaW5pdGlhbFNtb290aGluZ0ZhY3RvcjtcbiAgICB0aGlzLl90aGlja25lc3MgPSBDb25zdGFudHMuaW5pdGlhbFRoaWNrbmVzcztcbiAgICB0aGlzLl90YXJnZXRUaGlja25lc3MgPSB0aGlzLl90aGlja25lc3M7XG4gICAgdGhpcy5fd2VpZ2h0ID0gdGhpcy5fdGhpY2tuZXNzO1xuICAgIHRoaXMuX21heFdlaWdodCA9IHRoaXMuX3RoaWNrbmVzcyArIENvbnN0YW50cy53ZWlnaHRTcHJlYWQ7XG5cbiAgICB0aGlzLl9tb2RlID0gRHJhd2luZ01vZGUuRFJBVztcbiAgICB0aGlzLmFkYXB0aXZlU3Ryb2tlID0gdHJ1ZTtcblxuICAgIC8vIHVwZGF0ZSBmcm9tIGNvbmZpZyBvYmplY3RcbiAgICBbJ3dlaWdodCcsICdzbW9vdGhpbmcnLCAnYWRhcHRpdmVTdHJva2UnLCAnbW9kZSddXG4gICAgICAuZm9yRWFjaChrZXkgPT4gY29uZmlnW2tleV0gPT09IHVuZGVmaW5lZCA/IDAgOiB0aGlzW2tleV0gPSBjb25maWdba2V5XSk7XG4gIH1cblxuICAvKipcbiAgICogQmVnaW5zIGEgc3Ryb2tlIGF0IGEgZ2l2ZW4gcG9zaXRpb25cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICovXG4gIGJlZ2luU3Ryb2tlKHgsIHkpIHtcbiAgICB0aGlzLmNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5jb250ZXh0Lm1vdmVUbyh4LCB5KTtcblxuICAgIGlmICh0aGlzLnJlY29yZFN0cm9rZXMpIHtcbiAgICAgIHRoaXMuc3Ryb2tlVGltZXN0YW1wID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICB0aGlzLnN0cm9rZU1lbW9yeS5wdXNoKHsgcG9pbnQ6IG5ldyBQb2ludCh4LCB5KSwgdGltZTogcGVyZm9ybWFuY2Uubm93KCkgLSB0aGlzLnN0cm9rZVRpbWVzdGFtcCB9KTtcbiAgICB9XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdzdHJva2VzdGFydCcsIHsgeCwgeSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmRzIGEgc3Ryb2tlIGF0IGEgZ2l2ZW4gcG9zaXRpb25cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICovXG4gIGVuZFN0cm9rZSh4LCB5KSB7XG4gICAgdGhpcy5jb250ZXh0LmNsb3NlUGF0aCgpO1xuXG4gICAgaWYgKHRoaXMucmVjb3JkU3Ryb2tlcykge1xuICAgICAgdGhpcy5zdHJva2VNZW1vcnkucHVzaCh7IHBvaW50OiBuZXcgUG9pbnQoeCwgeSksIHRpbWU6IHBlcmZvcm1hbmNlLm5vdygpIC0gdGhpcy5zdHJva2VUaW1lc3RhbXAgfSk7XG4gICAgfVxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCgnc3Ryb2tlZW5kJywgeyB4LCB5IH0pO1xuXG4gICAgaWYgKHRoaXMucmVjb3JkU3Ryb2tlcykge1xuICAgICAgY29uc3Qgc3Ryb2tlID0ge1xuICAgICAgICBwb2ludHM6IHRoaXMuc3Ryb2tlTWVtb3J5LnNsaWNlKCksXG4gICAgICAgIG1vZGU6IHRoaXMubW9kZSxcbiAgICAgICAgd2VpZ2h0OiB0aGlzLndlaWdodCxcbiAgICAgICAgc21vb3RoaW5nOiB0aGlzLnNtb290aGluZyxcbiAgICAgICAgY29sb3I6IHRoaXMuY29sb3IsXG4gICAgICAgIGFkYXB0aXZlU3Ryb2tlOiB0aGlzLmFkYXB0aXZlU3Ryb2tlXG4gICAgICB9O1xuXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ3N0cm9rZXJlY29yZGVkJywgeyBzdHJva2UgfSk7XG4gICAgfVxuICAgIHRoaXMuc3Ryb2tlTWVtb3J5ID0gW107XG4gICAgZGVsZXRlICh0aGlzLnN0cm9rZVRpbWVzdGFtcCk7XG4gIH1cblxuICAvKipcbiAgICogRHJhd3MgYSBzbW9vdGggcXVhZHJhdGljIGN1cnZlIHdpdGggYWRhcHRpdmUgc3Ryb2tlIHRoaWNrbmVzc1xuICAgKiBiZXR3ZWVuIHR3byBwb2ludHNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggY3VycmVudCBYIGNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgY3VycmVudCBZIGNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHByZXZYIHByZXZpb3VzIFggY29vcmRpbmF0ZVxuICAgKiBAcGFyYW0ge251bWJlcn0gcHJldlkgcHJldmlvdXMgWSBjb29yZGluYXRlXG4gICAqL1xuICBkcmF3KHgsIHksIHByZXZYLCBwcmV2WSkge1xuICAgIGlmICh0aGlzLnJlY29yZFN0cm9rZXMpIHtcbiAgICAgIHRoaXMuc3Ryb2tlTWVtb3J5LnB1c2goeyBwb2ludDogbmV3IFBvaW50KHgsIHkpLCB0aW1lOiBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuc3Ryb2tlVGltZXN0YW1wIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY29udGV4dCB9ID0gdGhpcztcbiAgICAvLyBjYWxjdWxhdGUgZGlzdGFuY2UgZnJvbSBwcmV2aW91cyBwb2ludFxuICAgIGNvbnN0IHJhd0Rpc3QgPSBQaXhlbHMubGluZURpc3RhbmNlKHgsIHksIHByZXZYLCBwcmV2WSk7XG5cbiAgICAvLyBub3csIGhlcmUgd2Ugc2NhbGUgdGhlIGluaXRpYWwgc21vb3RoaW5nIGZhY3RvciBieSB0aGUgcmF3IGRpc3RhbmNlXG4gICAgLy8gdGhpcyBtZWFucyB0aGF0IHdoZW4gdGhlIG1vdXNlIG1vdmVzIGZhc3QsIHRoZXJlIGlzIG1vcmUgc21vb3RoaW5nXG4gICAgLy8gYW5kIHdoZW4gd2UncmUgZHJhd2luZyBzbWFsbCBkZXRhaWxlZCBzdHVmZiwgd2UgaGF2ZSBtb3JlIGNvbnRyb2xcbiAgICAvLyBhbHNvIHdlIGhhcmQgY2xpcCBhdCAxXG4gICAgY29uc3Qgc21vb3RoaW5nRmFjdG9yID0gTWF0aC5taW4oQ29uc3RhbnRzLm1pblNtb290aGluZ0ZhY3RvciwgdGhpcy5zbW9vdGhpbmcgKyAocmF3RGlzdCAtIDYwKSAvIDMwMDApO1xuXG4gICAgLy8gY2FsY3VsYXRlIHByb2Nlc3NlZCBjb29yZGluYXRlc1xuICAgIGNvbnN0IHByb2NYID0geCAtICh4IC0gcHJldlgpICogc21vb3RoaW5nRmFjdG9yO1xuICAgIGNvbnN0IHByb2NZID0geSAtICh5IC0gcHJldlkpICogc21vb3RoaW5nRmFjdG9yO1xuXG4gICAgLy8gcmVjYWxjdWxhdGUgZGlzdGFuY2UgZnJvbSBwcmV2aW91cyBwb2ludCwgdGhpcyB0aW1lIHJlbGF0aXZlIHRvIHRoZSBzbW9vdGhlZCBjb29yZHNcbiAgICBjb25zdCBkaXN0ID0gUGl4ZWxzLmxpbmVEaXN0YW5jZShwcm9jWCwgcHJvY1ksIHByZXZYLCBwcmV2WSk7XG5cbiAgICBpZiAodGhpcy5hZGFwdGl2ZVN0cm9rZSkge1xuICAgICAgLy8gY2FsY3VsYXRlIHRhcmdldCB0aGlja25lc3MgYmFzZWQgb24gdGhlIG5ldyBkaXN0YW5jZVxuICAgICAgdGhpcy5fdGFyZ2V0VGhpY2tuZXNzID0gKGRpc3QgLSBDb25zdGFudHMubWluTGluZVRoaWNrbmVzcylcbiAgICAgICAgLyBDb25zdGFudHMubGluZVRoaWNrbmVzc1JhbmdlICogKHRoaXMuX21heFdlaWdodCAtIHRoaXMuX3dlaWdodCkgKyB0aGlzLl93ZWlnaHQ7XG4gICAgICAvLyBhcHByb2FjaCB0aGUgdGFyZ2V0IGdyYWR1YWxseVxuICAgICAgaWYgKHRoaXMuX3RoaWNrbmVzcyA+IHRoaXMuX3RhcmdldFRoaWNrbmVzcykge1xuICAgICAgICB0aGlzLl90aGlja25lc3MgLT0gQ29uc3RhbnRzLnRoaWNrbmVzc0luY3JlbWVudDtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHRoaXMuX3RoaWNrbmVzcyA8IHRoaXMuX3RhcmdldFRoaWNrbmVzcykge1xuICAgICAgICB0aGlzLl90aGlja25lc3MgKz0gQ29uc3RhbnRzLnRoaWNrbmVzc0luY3JlbWVudDtcbiAgICAgIH1cbiAgICAgIC8vIHNldCBsaW5lIHdpZHRoXG4gICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHRoaXMuX3RoaWNrbmVzcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBsaW5lIHdpZHRoIGlzIGVxdWFsIHRvIGRlZmF1bHQgd2VpZ2h0XG4gICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHRoaXMuX3dlaWdodDtcbiAgICB9XG5cbiAgICAvLyBkcmF3IHVzaW5nIHF1YWQgaW50ZXJwb2xhdGlvblxuICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyhwcmV2WCwgcHJldlksIHByb2NYLCBwcm9jWSk7XG4gICAgY29udGV4dC5zdHJva2UoKTtcblxuICAgIHJldHVybiB7IHg6IHByb2NYLCB5OiBwcm9jWSB9O1xuICB9XG5cbiAgZ2V0IGNvbG9yKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuc3Ryb2tlU3R5bGU7XG4gIH1cblxuICBzZXQgY29sb3IoYykge1xuICAgIGlmICh0eXBlb2YgYyAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcignd3JvbmcgYXJndW1lbnQgdHlwZScpO1xuICAgIHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IGM7XG4gIH1cblxuICBnZXQgd2VpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLl93ZWlnaHQ7XG4gIH1cblxuICBzZXQgd2VpZ2h0KHcpIHtcbiAgICBpZiAodHlwZW9mIHcgIT09ICdudW1iZXInKSB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIGFyZ3VtZW50IHR5cGUnKTtcbiAgICB0aGlzLl93ZWlnaHQgPSB3O1xuICAgIHRoaXMuX3RoaWNrbmVzcyA9IHc7XG4gICAgdGhpcy5fdGFyZ2V0VGhpY2tuZXNzID0gdztcbiAgICB0aGlzLl9tYXhXZWlnaHQgPSB3ICsgQ29uc3RhbnRzLndlaWdodFNwcmVhZDtcbiAgfVxuXG4gIGdldCBtb2RlKCkge1xuICAgIHJldHVybiB0aGlzLl9tb2RlO1xuICB9XG5cbiAgc2V0IG1vZGUobSkge1xuICAgIGlmICh0eXBlb2YgbSAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcignd3JvbmcgYXJndW1lbnQgdHlwZScpO1xuICAgIHN3aXRjaCAobSkge1xuICAgICAgY2FzZSBEcmF3aW5nTW9kZS5FUkFTRTpcbiAgICAgICAgdGhpcy5fbW9kZSA9IERyYXdpbmdNb2RlLkVSQVNFO1xuICAgICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLW91dCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBEcmF3aW5nTW9kZS5GSUxMOlxuICAgICAgICB0aGlzLl9tb2RlID0gRHJhd2luZ01vZGUuRklMTDtcbiAgICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBEcmF3aW5nTW9kZS5ESVNBQkxFRDpcbiAgICAgICAgdGhpcy5fbW9kZSA9IERyYXdpbmdNb2RlLkRJU0FCTEVEO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRoaXMuX21vZGUgPSBEcmF3aW5nTW9kZS5EUkFXO1xuICAgICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaXNEaXJ0eSgpIHtcbiAgICByZXR1cm4gISF0aGlzLl9kaXJ0eTtcbiAgfVxuXG4gIGZpcmVEaXJ0eSgpIHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ2RpcnR5Jyk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXJ0eSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2RpcnR5ID0gZmFsc2U7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdjbGVhbicpO1xuXG4gICAgLy8gbWFrZSBzdXJlIHdlJ3JlIGluIHRoZSByaWdodCBjb21wb3NpdGluZyBtb2RlLCBhbmQgZXJhc2UgZXZlcnl0aGluZ1xuICAgIGlmICh0aGlzLm1vZGUgPT09IERyYXdpbmdNb2RlLkVSQVNFKSB7XG4gICAgICB0aGlzLm1vZGUgPSBEcmF3aW5nTW9kZS5EUkFXO1xuICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgtMTAsIC0xMCwgdGhpcy5jYW52YXMud2lkdGggKyAyMCwgdGhpcy5jYW52YXMuaGVpZ2h0ICsgMjApO1xuICAgICAgdGhpcy5tb2RlID0gRHJhd2luZ01vZGUuRVJBU0U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgtMTAsIC0xMCwgdGhpcy5jYW52YXMud2lkdGggKyAyMCwgdGhpcy5jYW52YXMuaGVpZ2h0ICsgMjApO1xuICAgIH1cbiAgfVxuXG4gIHRvSW1hZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FudmFzLnRvRGF0YVVSTCgpO1xuICB9XG5cbiAgZmlsbCgpIHtcbiAgICBjb25zdCB7IG1vdXNlIH0gPSB0aGlzO1xuICAgIGNvbnN0IHsgY29udGV4dCB9ID0gdGhpcztcbiAgICAvLyBjb252ZXJ0aW5nIHRvIEFycmF5IGJlY2F1c2UgU2FmYXJpIDlcbiAgICBjb25zdCBzdGFydENvbG9yID0gQXJyYXkuZnJvbShjb250ZXh0LmdldEltYWdlRGF0YShtb3VzZS54LCBtb3VzZS55LCAxLCAxKS5kYXRhKTtcblxuICAgIGlmICghdGhpcy5fZmlsbGluZykge1xuICAgICAgY29uc3QgeyB4LCB5IH0gPSBtb3VzZTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCgnZmlsbHN0YXJ0JywgeyB4LCB5IH0pO1xuICAgICAgdGhpcy5fZmlsbGluZyA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5fZmxvb2RGaWxsKG1vdXNlLngsIG1vdXNlLnksIHN0YXJ0Q29sb3IpOyB9LCBDb25zdGFudHMuZmxvb2RGaWxsSW50ZXJ2YWwpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuX2ZpbGxTdGFjay5wdXNoKFtcbiAgICAgICAgbW91c2UueCxcbiAgICAgICAgbW91c2UueSxcbiAgICAgICAgc3RhcnRDb2xvclxuICAgICAgXSk7XG4gICAgfVxuICB9XG5cbiAgX2Zsb29kRmlsbChfc3RhcnRYLCBfc3RhcnRZLCBzdGFydENvbG9yKSB7XG4gICAgY29uc3QgeyBjb250ZXh0IH0gPSB0aGlzO1xuICAgIGNvbnN0IHN0YXJ0WCA9IE1hdGguZmxvb3IoX3N0YXJ0WCk7XG4gICAgY29uc3Qgc3RhcnRZID0gTWF0aC5mbG9vcihfc3RhcnRZKTtcbiAgICBjb25zdCBjYW52YXNXaWR0aCA9IGNvbnRleHQuY2FudmFzLndpZHRoO1xuICAgIGNvbnN0IGNhbnZhc0hlaWdodCA9IGNvbnRleHQuY2FudmFzLmhlaWdodDtcbiAgICBjb25zdCBwaXhlbFN0YWNrID0gW1tzdGFydFgsIHN0YXJ0WV1dO1xuICAgIC8vIGhleCBuZWVkcyB0byBiZSB0cmFzZm9ybWVkIHRvIHJnYiBzaW5jZSBjb2xvckxheWVyIGFjY2VwdHMgUkdCXG4gICAgY29uc3QgZmlsbENvbG9yID0gUGl4ZWxzLmhleFRvUmdiKHRoaXMuY29sb3IpO1xuICAgIC8vIE5lZWQgdG8gc2F2ZSBjdXJyZW50IGNvbnRleHQgd2l0aCBjb2xvcnMsIHdlIHdpbGwgdXBkYXRlIGl0XG4gICAgY29uc3QgY29sb3JMYXllciA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGNvbnRleHQuY2FudmFzLndpZHRoLCBjb250ZXh0LmNhbnZhcy5oZWlnaHQpO1xuICAgIGNvbnN0IGFscGhhID0gTWF0aC5taW4oY29udGV4dC5nbG9iYWxBbHBoYSAqIDEwICogMjU1LCAyNTUpO1xuICAgIGNvbnN0IGNvbG9yUGl4ZWwgPSBQaXhlbHMuY29sb3JQaXhlbChjb2xvckxheWVyLmRhdGEsIC4uLmZpbGxDb2xvciwgc3RhcnRDb2xvciwgYWxwaGEpO1xuICAgIGNvbnN0IG1hdGNoQ29sb3IgPSBQaXhlbHMubWF0Y2hDb2xvcihjb2xvckxheWVyLmRhdGEsIC4uLnN0YXJ0Q29sb3IpO1xuICAgIGNvbnN0IG1hdGNoRmlsbENvbG9yID0gUGl4ZWxzLm1hdGNoQ29sb3IoY29sb3JMYXllci5kYXRhLCAuLi5bLi4uZmlsbENvbG9yLCAyNTVdKTtcblxuICAgIC8vIGNoZWNrIGlmIHdlJ3JlIHRyeWluZyB0byBmaWxsIHdpdGggdGhlIHNhbWUgY29sb3VyLCBpZiBzbywgc3RvcFxuICAgIGlmIChtYXRjaEZpbGxDb2xvcigoc3RhcnRZICogY29udGV4dC5jYW52YXMud2lkdGggKyBzdGFydFgpICogNCkpIHtcbiAgICAgIHRoaXMuX2ZpbGxpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCgnZmlsbGVuZCcsIHt9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3aGlsZSAocGl4ZWxTdGFjay5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IG5ld1BvcyA9IHBpeGVsU3RhY2sucG9wKCk7XG4gICAgICBjb25zdCB4ID0gbmV3UG9zWzBdO1xuICAgICAgbGV0IHkgPSBuZXdQb3NbMV07XG5cbiAgICAgIGxldCBwaXhlbFBvcyA9ICh5ICogY2FudmFzV2lkdGggKyB4KSAqIDQ7XG5cbiAgICAgIHdoaWxlICh5LS0gPj0gMCAmJiBtYXRjaENvbG9yKHBpeGVsUG9zKSkge1xuICAgICAgICBwaXhlbFBvcyAtPSBjYW52YXNXaWR0aCAqIDQ7XG4gICAgICB9XG4gICAgICBwaXhlbFBvcyArPSBjYW52YXNXaWR0aCAqIDQ7XG5cbiAgICAgICsreTtcblxuICAgICAgbGV0IHJlYWNoTGVmdCA9IGZhbHNlO1xuICAgICAgbGV0IHJlYWNoUmlnaHQgPSBmYWxzZTtcblxuICAgICAgd2hpbGUgKHkrKyA8IGNhbnZhc0hlaWdodCAtIDEgJiYgbWF0Y2hDb2xvcihwaXhlbFBvcykpIHtcbiAgICAgICAgY29sb3JQaXhlbChwaXhlbFBvcyk7XG5cbiAgICAgICAgaWYgKHggPiAwKSB7XG4gICAgICAgICAgaWYgKG1hdGNoQ29sb3IocGl4ZWxQb3MgLSA0KSkge1xuICAgICAgICAgICAgaWYgKCFyZWFjaExlZnQpIHtcbiAgICAgICAgICAgICAgcGl4ZWxTdGFjay5wdXNoKFt4IC0gMSwgeV0pO1xuICAgICAgICAgICAgICByZWFjaExlZnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChyZWFjaExlZnQpIHtcbiAgICAgICAgICAgIHJlYWNoTGVmdCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh4IDwgY2FudmFzV2lkdGggLSAxKSB7XG4gICAgICAgICAgaWYgKG1hdGNoQ29sb3IocGl4ZWxQb3MgKyA0KSkge1xuICAgICAgICAgICAgaWYgKCFyZWFjaFJpZ2h0KSB7XG4gICAgICAgICAgICAgIHBpeGVsU3RhY2sucHVzaChbeCArIDEsIHldKTtcbiAgICAgICAgICAgICAgcmVhY2hSaWdodCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKHJlYWNoUmlnaHQpIHtcbiAgICAgICAgICAgIHJlYWNoUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwaXhlbFBvcyArPSBjYW52YXNXaWR0aCAqIDQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGNvbnRleHQgd2l0aCBmaWxsZWQgYnVja2V0IVxuICAgIGNvbnRleHQucHV0SW1hZ2VEYXRhKGNvbG9yTGF5ZXIsIDAsIDApO1xuXG4gICAgaWYgKHRoaXMuX2ZpbGxTdGFjay5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2Zsb29kRmlsbCguLi50aGlzLl9maWxsU3RhY2suc2hpZnQoKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fZmlsbGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdmaWxsZW5kJywge30pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBBdHJhbWVudCB9O1xuIiwiZXhwb3J0IHsgQXRyYW1lbnQgfSBmcm9tICcuL3NyYy9hdHJhbWVudCc7XG4iXSwic291cmNlUm9vdCI6IiJ9