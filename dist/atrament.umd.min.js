!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.atramentJs=e():t.atramentJs=e()}(window,(function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=4)}([function(t,e){const s={floodFillInterval:100,maxLineThickness:50,minLineThickness:1};s.lineThicknessRange=s.maxLineThickness-s.minLineThickness,s.thicknessIncrement=.5,s.minSmoothingFactor=.87,s.initialSmoothingFactor=.85,s.weightSpread=10,s.initialThickness=2,t.exports=s},function(t,e){e.lineDistance=(t,e,s,i)=>{const n=Math.pow(s-t,2),o=Math.pow(i-e,2);return Math.sqrt(n+o)},e.hexToRgb=t=>{const e=t.match(/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]},e.matchColor=(t,e,s,i,n)=>o=>{const r=t[o],h=t[o+1],a=t[o+2],c=t[o+3];return r===e&&h===s&&a===i&&c===n},e.colorPixel=(t,s,i,n,o,r)=>{const h=e.matchColor(t,...o);return e=>{t[e]=s,t[e+1]=i,t[e+2]=n,t[e+3]=r,h(e+4)||(t[e+4]=.01*t[e+4]+.99*s,t[e+4+1]=.01*t[e+4+1]+.99*i,t[e+4+2]=.01*t[e+4+2]+.99*n,t[e+4+3]=.01*t[e+4+3]+.99*r),h(e-4)||(t[e-4]=.01*t[e-4]+.99*s,t[e-4+1]=.01*t[e-4+1]+.99*i,t[e-4+2]=.01*t[e-4+2]+.99*n,t[e-4+3]=.01*t[e-4+3]+.99*r)}}},function(t,e){class s{constructor(t,e){this.x=t,this.y=e}set(t,e){this.x=t,this.y=e}}t.exports={Mouse:class extends s{constructor(){super(0,0),this.down=!1,this.previous=new s(0,0)}},Point:s}},function(t,e){t.exports={AtramentEventTarget:class{constructor(){this.eventListeners=new Map}addEventListener(t,e){const s=this.eventListeners.get(t)||new Set;s.add(e),this.eventListeners.set(t,s)}removeEventListener(t,e){const s=this.eventListeners.get(t);s&&s.delete(e)}dispatchEvent(t,e){const s=this.eventListeners.get(t);s&&[...s].forEach(t=>t(e))}}}},function(t,e,s){t.exports=s(5)},function(t,e,s){"use strict";s.r(e);var i=s(2),n=s(0),o=s.n(n),r=s(1),h=s.n(r),a=s(3);const c={DRAW:"draw",ERASE:"erase",FILL:"fill",DISABLED:"disabled"},d=[c.DRAW,c.ERASE];class l extends a.AtramentEventTarget{constructor(t,e={}){if("undefined"==typeof window)throw new Error("Looks like we're not running in a browser");if(super(),t instanceof window.Node&&"CANVAS"===t.tagName)this.canvas=t;else{if("string"!=typeof t)throw new Error(`can't look for canvas based on '${t}'`);this.canvas=document.querySelector(t)}if(!this.canvas)throw new Error("canvas not found");this.canvas.width=e.width||this.canvas.width,this.canvas.height=e.height||this.canvas.height,this.mouse=new i.Mouse;const s=t=>{t.cancelable&&t.preventDefault();const e=this.canvas.getBoundingClientRect(),s=t.changedTouches&&t.changedTouches[0]||t;let i=s.offsetX,n=s.offsetY;void 0===i&&(i=s.clientX-e.left),void 0===n&&(n=s.clientY-e.top);const{mouse:o}=this;if(o.down&&d.includes(this.mode)){const{x:t,y:e}=this.draw(i,n,o.previous.x,o.previous.y);this._dirty||this.mode!==c.DRAW||i===o.x&&n===o.y||(this._dirty=!0,this.fireDirty()),o.set(i,n),o.previous.set(t,e)}else o.set(i,n)},n=t=>{if(t.cancelable&&t.preventDefault(),s(t),this.mode===c.FILL)return void this.fill();const{mouse:e}=this;e.previous.set(e.x,e.y),e.down=!0,this.beginStroke(e.previous.x,e.previous.y)},r=t=>{if(this.mode===c.FILL)return;const{mouse:e}=this;if(!e.down)return;const s=t.changedTouches&&t.changedTouches[0]||t,i=s.offsetX,n=s.offsetY;if(e.down=!1,e.x===i&&e.y===n&&d.includes(this.mode)){const{x:t,y:s}=this.draw(e.x,e.y,e.previous.x,e.previous.y);e.previous.set(t,s)}this.endStroke(e.x,e.y)};this.canvas.addEventListener("mousemove",s),this.canvas.addEventListener("mousedown",n),document.addEventListener("mouseup",r),this.canvas.addEventListener("touchstart",n),this.canvas.addEventListener("touchend",r),this.canvas.addEventListener("touchmove",s),this.destroy=()=>{this.clear(),this.canvas.removeEventListener("mousemove",s),this.canvas.removeEventListener("mousedown",n),document.removeEventListener("mouseup",r),this.canvas.removeEventListener("touchstart",n),this.canvas.removeEventListener("touchend",r),this.canvas.removeEventListener("touchmove",s)},this.context=this.canvas.getContext("2d"),this.context.globalCompositeOperation="source-over",this.context.globalAlpha=1,this.context.strokeStyle=e.color||"rgba(0,0,0,1)",this.context.lineCap="round",this.context.lineJoin="round",this.context.translate(.5,.5),this._filling=!1,this._fillStack=[],this.recordStrokes=!1,this.strokeMemory=[],this.smoothing=o.a.initialSmoothingFactor,this._thickness=o.a.initialThickness,this._targetThickness=this._thickness,this._weight=this._thickness,this._maxWeight=this._thickness+o.a.weightSpread,this._mode=c.DRAW,this.adaptiveStroke=!0,["weight","smoothing","adaptiveStroke","mode"].forEach(t=>void 0===e[t]?0:this[t]=e[t])}beginStroke(t,e){this.context.beginPath(),this.context.moveTo(t,e),this.recordStrokes&&(this.strokeTimestamp=performance.now(),this.strokeMemory.push({point:new i.Point(t,e),time:performance.now()-this.strokeTimestamp})),this.dispatchEvent("strokestart",{x:t,y:e})}endStroke(t,e){if(this.context.closePath(),this.recordStrokes&&this.strokeMemory.push({point:new i.Point(t,e),time:performance.now()-this.strokeTimestamp}),this.dispatchEvent("strokeend",{x:t,y:e}),this.recordStrokes){const t={points:this.strokeMemory.slice(),mode:this.mode,weight:this.weight,smoothing:this.smoothing,color:this.color,adaptiveStroke:this.adaptiveStroke};this.dispatchEvent("strokerecorded",{stroke:t})}this.strokeMemory=[],delete this.strokeTimestamp}draw(t,e,s,n){this.recordStrokes&&this.strokeMemory.push({point:new i.Point(t,e),time:performance.now()-this.strokeTimestamp});const{context:r}=this,a=h.a.lineDistance(t,e,s,n),c=Math.min(o.a.minSmoothingFactor,this.smoothing+(a-60)/3e3),d=t-(t-s)*c,l=e-(e-n)*c,u=h.a.lineDistance(d,l,s,n);return this.adaptiveStroke?(this._targetThickness=(u-o.a.minLineThickness)/o.a.lineThicknessRange*(this._maxWeight-this._weight)+this._weight,this._thickness>this._targetThickness?this._thickness-=o.a.thicknessIncrement:this._thickness<this._targetThickness&&(this._thickness+=o.a.thicknessIncrement),r.lineWidth=this._thickness):r.lineWidth=this._weight,r.quadraticCurveTo(s,n,d,l),r.stroke(),{x:d,y:l}}get color(){return this.context.strokeStyle}set color(t){if("string"!=typeof t)throw new Error("wrong argument type");this.context.strokeStyle=t}get weight(){return this._weight}set weight(t){if("number"!=typeof t)throw new Error("wrong argument type");this._weight=t,this._thickness=t,this._targetThickness=t,this._maxWeight=t+o.a.weightSpread}get mode(){return this._mode}set mode(t){if("string"!=typeof t)throw new Error("wrong argument type");switch(t){case c.ERASE:this._mode=c.ERASE,this.context.globalCompositeOperation="destination-out";break;case c.FILL:this._mode=c.FILL,this.context.globalCompositeOperation="source-over";break;case c.DISABLED:this._mode=c.DISABLED;break;default:this._mode=c.DRAW,this.context.globalCompositeOperation="source-over"}}isDirty(){return!!this._dirty}fireDirty(){this.dispatchEvent("dirty")}clear(){this.isDirty&&(this._dirty=!1,this.dispatchEvent("clean"),this.mode===c.ERASE?(this.mode=c.DRAW,this.context.clearRect(-10,-10,this.canvas.width+20,this.canvas.height+20),this.mode=c.ERASE):this.context.clearRect(-10,-10,this.canvas.width+20,this.canvas.height+20))}toImage(){return this.canvas.toDataURL()}fill(){const{mouse:t}=this,{context:e}=this,s=Array.from(e.getImageData(t.x,t.y,1,1).data);if(this._filling)this._fillStack.push([t.x,t.y,s]);else{const{x:e,y:i}=t;this.dispatchEvent("fillstart",{x:e,y:i}),this._filling=!0,setTimeout(()=>{this._floodFill(t.x,t.y,s)},o.a.floodFillInterval)}}_floodFill(t,e,s){const{context:i}=this,n=Math.floor(t),o=Math.floor(e),r=i.canvas.width,a=i.canvas.height,c=[[n,o]],d=h.a.hexToRgb(this.color),l=i.getImageData(0,0,i.canvas.width,i.canvas.height),u=Math.min(10*i.globalAlpha*255,255),m=h.a.colorPixel(l.data,...d,s,u),f=h.a.matchColor(l.data,...s);if(h.a.matchColor(l.data,...d,255)(4*(o*i.canvas.width+n)))return this._filling=!1,void this.dispatchEvent("fillend",{});for(;c.length;){const t=c.pop(),e=t[0];let s=t[1],i=4*(s*r+e);for(;s-- >=0&&f(i);)i-=4*r;i+=4*r,++s;let n=!1,o=!1;for(;s++<a-1&&f(i);)m(i),e>0&&(f(i-4)?n||(c.push([e-1,s]),n=!0):n&&(n=!1)),e<r-1&&(f(i+4)?o||(c.push([e+1,s]),o=!0):o&&(o=!1)),i+=4*r}i.putImageData(l,0,0),this._fillStack.length?this._floodFill(...this._fillStack.shift()):(this._filling=!1,this.dispatchEvent("fillend",{}))}}s.d(e,"Atrament",(function(){return l}))}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdHJhbWVudEpzL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9hdHJhbWVudEpzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2F0cmFtZW50SnMvLi9zcmMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2F0cmFtZW50SnMvLi9zcmMvcGl4ZWxzLmpzIiwid2VicGFjazovL2F0cmFtZW50SnMvLi9zcmMvbW91c2UuanMiLCJ3ZWJwYWNrOi8vYXRyYW1lbnRKcy8uL3NyYy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vYXRyYW1lbnRKcy8uL3NyYy9hdHJhbWVudC5qcyIsIndlYnBhY2s6Ly9hdHJhbWVudEpzLy4vaW5kZXgudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkMiLCJsaW5lVGhpY2tuZXNzUmFuZ2UiLCJtYXhMaW5lVGhpY2tuZXNzIiwibWluTGluZVRoaWNrbmVzcyIsInRoaWNrbmVzc0luY3JlbWVudCIsIm1pblNtb290aGluZ0ZhY3RvciIsImluaXRpYWxTbW9vdGhpbmdGYWN0b3IiLCJ3ZWlnaHRTcHJlYWQiLCJpbml0aWFsVGhpY2tuZXNzIiwibGluZURpc3RhbmNlIiwieDEiLCJ5MSIsIngyIiwieTIiLCJ4cyIsIk1hdGgiLCJwb3ciLCJ5cyIsInNxcnQiLCJoZXhUb1JnYiIsImhleENvbG9yIiwibWF0Y2giLCJwYXJzZUludCIsIm1hdGNoQ29sb3IiLCJkYXRhIiwiY29tcFIiLCJjb21wRyIsImNvbXBCIiwiY29tcEEiLCJwaXhlbFBvcyIsImciLCJiIiwiYSIsImNvbG9yUGl4ZWwiLCJmaWxsUiIsImZpbGxHIiwiZmlsbEIiLCJzdGFydENvbG9yIiwiYWxwaGEiLCJtYXRjaGVyIiwiUG9pbnQiLCJ4IiwieSIsInRoaXMiLCJNb3VzZSIsInN1cGVyIiwiZG93biIsInByZXZpb3VzIiwiQXRyYW1lbnRFdmVudFRhcmdldCIsImV2ZW50TGlzdGVuZXJzIiwiTWFwIiwiZXZlbnROYW1lIiwiaGFuZGxlciIsImhhbmRsZXJzIiwiU2V0IiwiYWRkIiwic2V0IiwiZGVsZXRlIiwiZm9yRWFjaCIsIkRyYXdpbmdNb2RlIiwiRFJBVyIsIkVSQVNFIiwiRklMTCIsIkRJU0FCTEVEIiwiUGF0aERyYXdpbmdNb2RlcyIsInNlbGVjdG9yIiwiY29uZmlnIiwiRXJyb3IiLCJOb2RlIiwidGFnTmFtZSIsImNhbnZhcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIndpZHRoIiwiaGVpZ2h0IiwibW91c2UiLCJtb3VzZU1vdmUiLCJldmVudCIsImNhbmNlbGFibGUiLCJwcmV2ZW50RGVmYXVsdCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwb3NpdGlvbiIsImNoYW5nZWRUb3VjaGVzIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJjbGllbnRYIiwibGVmdCIsImNsaWVudFkiLCJ0b3AiLCJpbmNsdWRlcyIsIm5ld1giLCJuZXdZIiwiZHJhdyIsIl9kaXJ0eSIsImZpcmVEaXJ0eSIsIm1vdXNlRG93biIsImZpbGwiLCJiZWdpblN0cm9rZSIsIm1vdXNlVXAiLCJlIiwibngiLCJueSIsImVuZFN0cm9rZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZXN0cm95IiwiY2xlYXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY29udGV4dCIsImdldENvbnRleHQiLCJnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24iLCJnbG9iYWxBbHBoYSIsInN0cm9rZVN0eWxlIiwiY29sb3IiLCJsaW5lQ2FwIiwibGluZUpvaW4iLCJ0cmFuc2xhdGUiLCJfZmlsbGluZyIsIl9maWxsU3RhY2siLCJyZWNvcmRTdHJva2VzIiwic3Ryb2tlTWVtb3J5Iiwic21vb3RoaW5nIiwiX3RoaWNrbmVzcyIsIl90YXJnZXRUaGlja25lc3MiLCJfd2VpZ2h0IiwiX21heFdlaWdodCIsIl9tb2RlIiwiYWRhcHRpdmVTdHJva2UiLCJ1bmRlZmluZWQiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJzdHJva2VUaW1lc3RhbXAiLCJwZXJmb3JtYW5jZSIsIm5vdyIsInB1c2giLCJwb2ludCIsInRpbWUiLCJkaXNwYXRjaEV2ZW50IiwiY2xvc2VQYXRoIiwic3Ryb2tlIiwicG9pbnRzIiwic2xpY2UiLCJ3ZWlnaHQiLCJwcmV2WCIsInByZXZZIiwicmF3RGlzdCIsInNtb290aGluZ0ZhY3RvciIsIm1pbiIsInByb2NYIiwicHJvY1kiLCJkaXN0IiwibGluZVdpZHRoIiwicXVhZHJhdGljQ3VydmVUbyIsInciLCJpc0RpcnR5IiwiY2xlYXJSZWN0IiwidG9EYXRhVVJMIiwiQXJyYXkiLCJmcm9tIiwiZ2V0SW1hZ2VEYXRhIiwic2V0VGltZW91dCIsIl9mbG9vZEZpbGwiLCJmbG9vZEZpbGxJbnRlcnZhbCIsIl9zdGFydFgiLCJfc3RhcnRZIiwic3RhcnRYIiwiZmxvb3IiLCJzdGFydFkiLCJjYW52YXNXaWR0aCIsImNhbnZhc0hlaWdodCIsInBpeGVsU3RhY2siLCJmaWxsQ29sb3IiLCJjb2xvckxheWVyIiwibWF0Y2hGaWxsQ29sb3IiLCJsZW5ndGgiLCJuZXdQb3MiLCJwb3AiLCJyZWFjaExlZnQiLCJyZWFjaFJpZ2h0IiwicHV0SW1hZ2VEYXRhIiwic2hpZnQiXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxH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QyxNQUFPLEdBQUtuQixFQUFXTSxJQUM1QkEsR0FBMEIsRUFBZDJJLEVBRWQzSSxHQUEwQixFQUFkMkksSUFFVjlILEVBRUYsSUFBSXVJLEdBQVksRUFDWkMsR0FBYSxFQUVqQixLQUFPeEksSUFBTStILEVBQWUsR0FBS2xKLEVBQVdNLElBQzFDSSxFQUFXSixHQUVQWSxFQUFJLElBQ0ZsQixFQUFXTSxFQUFXLEdBQ25Cb0osSUFDSFAsRUFBV3BDLEtBQUssQ0FBQzdGLEVBQUksRUFBR0MsSUFDeEJ1SSxHQUFZLEdBR1BBLElBQ1BBLEdBQVksSUFJWnhJLEVBQUkrSCxFQUFjLElBQ2hCakosRUFBV00sRUFBVyxHQUNuQnFKLElBQ0hSLEVBQVdwQyxLQUFLLENBQUM3RixFQUFJLEVBQUdDLElBQ3hCd0ksR0FBYSxHQUdSQSxJQUNQQSxHQUFhLElBSWpCckosR0FBMEIsRUFBZDJJLEVBS2hCNUQsRUFBUXVFLGFBQWFQLEVBQVksRUFBRyxHQUVoQ2pJLEtBQUsyRSxXQUFXd0QsT0FDbEJuSSxLQUFLc0gsY0FBY3RILEtBQUsyRSxXQUFXOEQsVUFHbkN6SSxLQUFLMEUsVUFBVyxFQUNoQjFFLEtBQUs4RixjQUFjLFVBQVcsTUMvYnBDIiwiZmlsZSI6ImF0cmFtZW50LnVtZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJhdHJhbWVudEpzXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImF0cmFtZW50SnNcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsImNvbnN0IEMgPSB7fTtcbkMuZmxvb2RGaWxsSW50ZXJ2YWwgPSAxMDA7XG5DLm1heExpbmVUaGlja25lc3MgPSA1MDtcbkMubWluTGluZVRoaWNrbmVzcyA9IDE7XG5DLmxpbmVUaGlja25lc3NSYW5nZSA9IEMubWF4TGluZVRoaWNrbmVzcyAtIEMubWluTGluZVRoaWNrbmVzcztcbkMudGhpY2tuZXNzSW5jcmVtZW50ID0gMC41O1xuQy5taW5TbW9vdGhpbmdGYWN0b3IgPSAwLjg3O1xuQy5pbml0aWFsU21vb3RoaW5nRmFjdG9yID0gMC44NTtcbkMud2VpZ2h0U3ByZWFkID0gMTA7XG5DLmluaXRpYWxUaGlja25lc3MgPSAyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEM7XG4iLCJleHBvcnRzLmxpbmVEaXN0YW5jZSA9ICh4MSwgeTEsIHgyLCB5MikgPT4ge1xuICAvLyBjYWxjdWxhdGUgZXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gKHgxLCB5MSkgYW5kICh4MiwgeTIpXG4gIGNvbnN0IHhzID0gTWF0aC5wb3coeDIgLSB4MSwgMik7XG4gIGNvbnN0IHlzID0gTWF0aC5wb3coeTIgLSB5MSwgMik7XG4gIHJldHVybiBNYXRoLnNxcnQoeHMgKyB5cyk7XG59O1xuXG5leHBvcnRzLmhleFRvUmdiID0gKGhleENvbG9yKSA9PiB7XG4gIC8vIFNpbmNlIGlucHV0IHR5cGUgY29sb3IgcHJvdmlkZXMgaGV4IGFuZCBJbWFnZURhdGEgYWNjZXB0cyBSR0IgbmVlZCB0byB0cmFuc2Zvcm1cbiAgY29uc3QgbSA9IGhleENvbG9yLm1hdGNoKC9eIz8oW1xcZGEtZl17Mn0pKFtcXGRhLWZdezJ9KShbXFxkYS1mXXsyfSkkL2kpO1xuICByZXR1cm4gW1xuICAgIHBhcnNlSW50KG1bMV0sIDE2KSxcbiAgICBwYXJzZUludChtWzJdLCAxNiksXG4gICAgcGFyc2VJbnQobVszXSwgMTYpXG4gIF07XG59O1xuXG5leHBvcnRzLm1hdGNoQ29sb3IgPSAoZGF0YSwgY29tcFIsIGNvbXBHLCBjb21wQiwgY29tcEEpID0+IChwaXhlbFBvcykgPT4ge1xuICAvLyBQaXhlbCBjb2xvciBlcXVhbHMgY29tcCBjb2xvcj9cbiAgY29uc3QgciA9IGRhdGFbcGl4ZWxQb3NdO1xuICBjb25zdCBnID0gZGF0YVtwaXhlbFBvcyArIDFdO1xuICBjb25zdCBiID0gZGF0YVtwaXhlbFBvcyArIDJdO1xuICBjb25zdCBhID0gZGF0YVtwaXhlbFBvcyArIDNdO1xuXG4gIHJldHVybiAociA9PT0gY29tcFIgJiYgZyA9PT0gY29tcEcgJiYgYiA9PT0gY29tcEIgJiYgYSA9PT0gY29tcEEpO1xufTtcblxuZXhwb3J0cy5jb2xvclBpeGVsID0gKGRhdGEsIGZpbGxSLCBmaWxsRywgZmlsbEIsIHN0YXJ0Q29sb3IsIGFscGhhKSA9PiB7XG4gIGNvbnN0IG1hdGNoZXIgPSBleHBvcnRzLm1hdGNoQ29sb3IoZGF0YSwgLi4uc3RhcnRDb2xvcik7XG5cbiAgcmV0dXJuIChwaXhlbFBvcykgPT4ge1xuICAgIC8vIFVwZGF0ZSBmaWxsIGNvbG9yIGluIG1hdHJpeFxuICAgIGRhdGFbcGl4ZWxQb3NdID0gZmlsbFI7XG4gICAgZGF0YVtwaXhlbFBvcyArIDFdID0gZmlsbEc7XG4gICAgZGF0YVtwaXhlbFBvcyArIDJdID0gZmlsbEI7XG4gICAgZGF0YVtwaXhlbFBvcyArIDNdID0gYWxwaGE7XG5cbiAgICBpZiAoIW1hdGNoZXIocGl4ZWxQb3MgKyA0KSkge1xuICAgICAgZGF0YVtwaXhlbFBvcyArIDRdID0gZGF0YVtwaXhlbFBvcyArIDRdICogMC4wMSArIGZpbGxSICogMC45OTtcbiAgICAgIGRhdGFbcGl4ZWxQb3MgKyA0ICsgMV0gPSBkYXRhW3BpeGVsUG9zICsgNCArIDFdICogMC4wMSArIGZpbGxHICogMC45OTtcbiAgICAgIGRhdGFbcGl4ZWxQb3MgKyA0ICsgMl0gPSBkYXRhW3BpeGVsUG9zICsgNCArIDJdICogMC4wMSArIGZpbGxCICogMC45OTtcbiAgICAgIGRhdGFbcGl4ZWxQb3MgKyA0ICsgM10gPSBkYXRhW3BpeGVsUG9zICsgNCArIDNdICogMC4wMSArIGFscGhhICogMC45OTtcbiAgICB9XG5cbiAgICBpZiAoIW1hdGNoZXIocGl4ZWxQb3MgLSA0KSkge1xuICAgICAgZGF0YVtwaXhlbFBvcyAtIDRdID0gZGF0YVtwaXhlbFBvcyAtIDRdICogMC4wMSArIGZpbGxSICogMC45OTtcbiAgICAgIGRhdGFbcGl4ZWxQb3MgLSA0ICsgMV0gPSBkYXRhW3BpeGVsUG9zIC0gNCArIDFdICogMC4wMSArIGZpbGxHICogMC45OTtcbiAgICAgIGRhdGFbcGl4ZWxQb3MgLSA0ICsgMl0gPSBkYXRhW3BpeGVsUG9zIC0gNCArIDJdICogMC4wMSArIGZpbGxCICogMC45OTtcbiAgICAgIGRhdGFbcGl4ZWxQb3MgLSA0ICsgM10gPSBkYXRhW3BpeGVsUG9zIC0gNCArIDNdICogMC4wMSArIGFscGhhICogMC45OTtcbiAgICB9XG4gIH07XG59O1xuIiwiLy8gbWFrZSBhIGNsYXNzIGZvciBQb2ludFxuY2xhc3MgUG9pbnQge1xuICBjb25zdHJ1Y3Rvcih4LCB5KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICB9XG5cbiAgc2V0KHgsIHkpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gIH1cbn1cblxuLy8gbWFrZSBhIGNsYXNzIGZvciB0aGUgbW91c2UgZGF0YVxuY2xhc3MgTW91c2UgZXh0ZW5kcyBQb2ludCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKDAsIDApO1xuICAgIHRoaXMuZG93biA9IGZhbHNlO1xuICAgIHRoaXMucHJldmlvdXMgPSBuZXcgUG9pbnQoMCwgMCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IE1vdXNlLCBQb2ludCB9O1xuIiwiY2xhc3MgQXRyYW1lbnRFdmVudFRhcmdldCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMgPSBuZXcgTWFwKCk7XG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnROYW1lKSB8fCBuZXcgU2V0KCk7XG4gICAgaGFuZGxlcnMuYWRkKGhhbmRsZXIpO1xuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KGV2ZW50TmFtZSwgaGFuZGxlcnMpO1xuICB9XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSk7XG4gICAgaWYgKCFoYW5kbGVycykgcmV0dXJuO1xuICAgIGhhbmRsZXJzLmRlbGV0ZShoYW5kbGVyKTtcbiAgfVxuXG4gIGRpc3BhdGNoRXZlbnQoZXZlbnROYW1lLCBkYXRhKSB7XG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudE5hbWUpO1xuICAgIGlmICghaGFuZGxlcnMpIHJldHVybjtcbiAgICBbLi4uaGFuZGxlcnNdLmZvckVhY2goaGFuZGxlciA9PiBoYW5kbGVyKGRhdGEpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgQXRyYW1lbnRFdmVudFRhcmdldCB9O1xuIiwiaW1wb3J0IHsgTW91c2UsIFBvaW50IH0gZnJvbSAnLi9tb3VzZS5qcyc7XG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCBQaXhlbHMgZnJvbSAnLi9waXhlbHMuanMnO1xuaW1wb3J0IHsgQXRyYW1lbnRFdmVudFRhcmdldCB9IGZyb20gJy4vZXZlbnRzLmpzJztcblxuXG5jb25zdCBEcmF3aW5nTW9kZSA9IHtcbiAgRFJBVzogJ2RyYXcnLFxuICBFUkFTRTogJ2VyYXNlJyxcbiAgRklMTDogJ2ZpbGwnLFxuICBESVNBQkxFRDogJ2Rpc2FibGVkJ1xufTtcblxuY29uc3QgUGF0aERyYXdpbmdNb2RlcyA9IFtEcmF3aW5nTW9kZS5EUkFXLCBEcmF3aW5nTW9kZS5FUkFTRV07XG5cbmNsYXNzIEF0cmFtZW50IGV4dGVuZHMgQXRyYW1lbnRFdmVudFRhcmdldCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBjb25maWcgPSB7fSkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdMb29rcyBsaWtlIHdlXFwncmUgbm90IHJ1bm5pbmcgaW4gYSBicm93c2VyJyk7XG4gICAgfVxuXG4gICAgc3VwZXIoKTtcblxuICAgIC8vIGdldCBjYW52YXMgZWxlbWVudFxuICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIHdpbmRvdy5Ob2RlICYmIHNlbGVjdG9yLnRhZ05hbWUgPT09ICdDQU5WQVMnKSB0aGlzLmNhbnZhcyA9IHNlbGVjdG9yO1xuICAgIGVsc2UgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpIHRoaXMuY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoYGNhbid0IGxvb2sgZm9yIGNhbnZhcyBiYXNlZCBvbiAnJHtzZWxlY3Rvcn0nYCk7XG4gICAgaWYgKCF0aGlzLmNhbnZhcykgdGhyb3cgbmV3IEVycm9yKCdjYW52YXMgbm90IGZvdW5kJyk7XG5cbiAgICAvLyBzZXQgZXh0ZXJuYWwgY2FudmFzIHBhcmFtc1xuICAgIHRoaXMuY2FudmFzLndpZHRoID0gY29uZmlnLndpZHRoIHx8IHRoaXMuY2FudmFzLndpZHRoO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGNvbmZpZy5oZWlnaHQgfHwgdGhpcy5jYW52YXMuaGVpZ2h0O1xuXG4gICAgLy8gY3JlYXRlIGEgbW91c2Ugb2JqZWN0XG4gICAgdGhpcy5tb3VzZSA9IG5ldyBNb3VzZSgpO1xuXG4gICAgLy8gbW91c2Vtb3ZlIGhhbmRsZXJcbiAgICBjb25zdCBtb3VzZU1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5jYW5jZWxhYmxlKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gZXZlbnQuY2hhbmdlZFRvdWNoZXMgJiYgZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0gfHwgZXZlbnQ7XG4gICAgICBsZXQgeCA9IHBvc2l0aW9uLm9mZnNldFg7XG4gICAgICBsZXQgeSA9IHBvc2l0aW9uLm9mZnNldFk7XG5cbiAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgeCA9IHBvc2l0aW9uLmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHkgPSBwb3NpdGlvbi5jbGllbnRZIC0gcmVjdC50b3A7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgbW91c2UgfSA9IHRoaXM7XG4gICAgICAvLyBkcmF3IGlmIHdlIHNob3VsZCBkcmF3XG4gICAgICBpZiAobW91c2UuZG93biAmJiBQYXRoRHJhd2luZ01vZGVzLmluY2x1ZGVzKHRoaXMubW9kZSkpIHtcbiAgICAgICAgY29uc3QgeyB4OiBuZXdYLCB5OiBuZXdZIH0gPSB0aGlzLmRyYXcoeCwgeSwgbW91c2UucHJldmlvdXMueCwgbW91c2UucHJldmlvdXMueSk7XG5cbiAgICAgICAgaWYgKCF0aGlzLl9kaXJ0eSAmJiB0aGlzLm1vZGUgPT09IERyYXdpbmdNb2RlLkRSQVcgJiYgKHggIT09IG1vdXNlLnggfHwgeSAhPT0gbW91c2UueSkpIHtcbiAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5maXJlRGlydHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vdXNlLnNldCh4LCB5KTtcbiAgICAgICAgbW91c2UucHJldmlvdXMuc2V0KG5ld1gsIG5ld1kpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG1vdXNlLnNldCh4LCB5KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gbW91c2Vkb3duIGhhbmRsZXJcbiAgICBjb25zdCBtb3VzZURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5jYW5jZWxhYmxlKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICAvLyB1cGRhdGUgcG9zaXRpb24ganVzdCBpbiBjYXNlXG4gICAgICBtb3VzZU1vdmUoZXZlbnQpO1xuXG4gICAgICAvLyBpZiB3ZSBhcmUgZmlsbGluZyAtIGZpbGwgYW5kIHJldHVyblxuICAgICAgaWYgKHRoaXMubW9kZSA9PT0gRHJhd2luZ01vZGUuRklMTCkge1xuICAgICAgICB0aGlzLmZpbGwoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gcmVtZW1iZXIgaXRcbiAgICAgIGNvbnN0IHsgbW91c2UgfSA9IHRoaXM7XG4gICAgICBtb3VzZS5wcmV2aW91cy5zZXQobW91c2UueCwgbW91c2UueSk7XG4gICAgICBtb3VzZS5kb3duID0gdHJ1ZTtcblxuICAgICAgdGhpcy5iZWdpblN0cm9rZShtb3VzZS5wcmV2aW91cy54LCBtb3VzZS5wcmV2aW91cy55KTtcbiAgICB9O1xuXG4gICAgY29uc3QgbW91c2VVcCA9IChlKSA9PiB7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSBEcmF3aW5nTW9kZS5GSUxMKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBtb3VzZSB9ID0gdGhpcztcblxuICAgICAgaWYgKCFtb3VzZS5kb3duKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcG9zaXRpb24gPSBlLmNoYW5nZWRUb3VjaGVzICYmIGUuY2hhbmdlZFRvdWNoZXNbMF0gfHwgZTtcbiAgICAgIGNvbnN0IHggPSBwb3NpdGlvbi5vZmZzZXRYO1xuICAgICAgY29uc3QgeSA9IHBvc2l0aW9uLm9mZnNldFk7XG4gICAgICBtb3VzZS5kb3duID0gZmFsc2U7XG5cbiAgICAgIGlmIChtb3VzZS54ID09PSB4ICYmIG1vdXNlLnkgPT09IHkgJiYgUGF0aERyYXdpbmdNb2Rlcy5pbmNsdWRlcyh0aGlzLm1vZGUpKSB7XG4gICAgICAgIGNvbnN0IHsgeDogbngsIHk6IG55IH0gPSB0aGlzLmRyYXcobW91c2UueCwgbW91c2UueSwgbW91c2UucHJldmlvdXMueCwgbW91c2UucHJldmlvdXMueSk7XG4gICAgICAgIG1vdXNlLnByZXZpb3VzLnNldChueCwgbnkpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmVuZFN0cm9rZShtb3VzZS54LCBtb3VzZS55KTtcbiAgICB9O1xuXG4gICAgLy8gYXR0YWNoIGxpc3RlbmVyc1xuICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdXNlTW92ZSk7XG4gICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgbW91c2VEb3duKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2VVcCk7XG4gICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG1vdXNlRG93bik7XG4gICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBtb3VzZVVwKTtcbiAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBtb3VzZU1vdmUpO1xuXG4gICAgLy8gaGVscGVyIGZvciBkZXN0cm95aW5nIEF0cmFtZW50IChyZW1vdmluZyBldmVudCBsaXN0ZW5lcnMpXG4gICAgdGhpcy5kZXN0cm95ID0gKCkgPT4ge1xuICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW91c2VNb3ZlKTtcbiAgICAgIHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG1vdXNlRG93bik7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2VVcCk7XG4gICAgICB0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgbW91c2VEb3duKTtcbiAgICAgIHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgbW91c2VVcCk7XG4gICAgICB0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBtb3VzZU1vdmUpO1xuICAgIH07XG5cbiAgICAvLyBzZXQgaW50ZXJuYWwgY2FudmFzIHBhcmFtc1xuICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhID0gMTtcbiAgICB0aGlzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb25maWcuY29sb3IgfHwgJ3JnYmEoMCwwLDAsMSknO1xuICAgIHRoaXMuY29udGV4dC5saW5lQ2FwID0gJ3JvdW5kJztcbiAgICB0aGlzLmNvbnRleHQubGluZUpvaW4gPSAncm91bmQnO1xuICAgIHRoaXMuY29udGV4dC50cmFuc2xhdGUoMC41LCAwLjUpO1xuXG4gICAgdGhpcy5fZmlsbGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX2ZpbGxTdGFjayA9IFtdO1xuXG4gICAgLy8gc2V0IGRyYXdpbmcgcGFyYW1zXG4gICAgdGhpcy5yZWNvcmRTdHJva2VzID0gZmFsc2U7XG4gICAgdGhpcy5zdHJva2VNZW1vcnkgPSBbXTtcblxuICAgIHRoaXMuc21vb3RoaW5nID0gQ29uc3RhbnRzLmluaXRpYWxTbW9vdGhpbmdGYWN0b3I7XG4gICAgdGhpcy5fdGhpY2tuZXNzID0gQ29uc3RhbnRzLmluaXRpYWxUaGlja25lc3M7XG4gICAgdGhpcy5fdGFyZ2V0VGhpY2tuZXNzID0gdGhpcy5fdGhpY2tuZXNzO1xuICAgIHRoaXMuX3dlaWdodCA9IHRoaXMuX3RoaWNrbmVzcztcbiAgICB0aGlzLl9tYXhXZWlnaHQgPSB0aGlzLl90aGlja25lc3MgKyBDb25zdGFudHMud2VpZ2h0U3ByZWFkO1xuXG4gICAgdGhpcy5fbW9kZSA9IERyYXdpbmdNb2RlLkRSQVc7XG4gICAgdGhpcy5hZGFwdGl2ZVN0cm9rZSA9IHRydWU7XG5cbiAgICAvLyB1cGRhdGUgZnJvbSBjb25maWcgb2JqZWN0XG4gICAgWyd3ZWlnaHQnLCAnc21vb3RoaW5nJywgJ2FkYXB0aXZlU3Ryb2tlJywgJ21vZGUnXVxuICAgICAgLmZvckVhY2goa2V5ID0+IGNvbmZpZ1trZXldID09PSB1bmRlZmluZWQgPyAwIDogdGhpc1trZXldID0gY29uZmlnW2tleV0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEJlZ2lucyBhIHN0cm9rZSBhdCBhIGdpdmVuIHBvc2l0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqL1xuICBiZWdpblN0cm9rZSh4LCB5KSB7XG4gICAgdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIHRoaXMuY29udGV4dC5tb3ZlVG8oeCwgeSk7XG5cbiAgICBpZiAodGhpcy5yZWNvcmRTdHJva2VzKSB7XG4gICAgICB0aGlzLnN0cm9rZVRpbWVzdGFtcCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgdGhpcy5zdHJva2VNZW1vcnkucHVzaCh7IHBvaW50OiBuZXcgUG9pbnQoeCwgeSksIHRpbWU6IHBlcmZvcm1hbmNlLm5vdygpIC0gdGhpcy5zdHJva2VUaW1lc3RhbXAgfSk7XG4gICAgfVxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCgnc3Ryb2tlc3RhcnQnLCB7IHgsIHkgfSk7XG4gIH1cblxuICAvKipcbiAgICogRW5kcyBhIHN0cm9rZSBhdCBhIGdpdmVuIHBvc2l0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqL1xuICBlbmRTdHJva2UoeCwgeSkge1xuICAgIHRoaXMuY29udGV4dC5jbG9zZVBhdGgoKTtcblxuICAgIGlmICh0aGlzLnJlY29yZFN0cm9rZXMpIHtcbiAgICAgIHRoaXMuc3Ryb2tlTWVtb3J5LnB1c2goeyBwb2ludDogbmV3IFBvaW50KHgsIHkpLCB0aW1lOiBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuc3Ryb2tlVGltZXN0YW1wIH0pO1xuICAgIH1cbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ3N0cm9rZWVuZCcsIHsgeCwgeSB9KTtcblxuICAgIGlmICh0aGlzLnJlY29yZFN0cm9rZXMpIHtcbiAgICAgIGNvbnN0IHN0cm9rZSA9IHtcbiAgICAgICAgcG9pbnRzOiB0aGlzLnN0cm9rZU1lbW9yeS5zbGljZSgpLFxuICAgICAgICBtb2RlOiB0aGlzLm1vZGUsXG4gICAgICAgIHdlaWdodDogdGhpcy53ZWlnaHQsXG4gICAgICAgIHNtb290aGluZzogdGhpcy5zbW9vdGhpbmcsXG4gICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yLFxuICAgICAgICBhZGFwdGl2ZVN0cm9rZTogdGhpcy5hZGFwdGl2ZVN0cm9rZVxuICAgICAgfTtcblxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdzdHJva2VyZWNvcmRlZCcsIHsgc3Ryb2tlIH0pO1xuICAgIH1cbiAgICB0aGlzLnN0cm9rZU1lbW9yeSA9IFtdO1xuICAgIGRlbGV0ZSAodGhpcy5zdHJva2VUaW1lc3RhbXApO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIGEgc21vb3RoIHF1YWRyYXRpYyBjdXJ2ZSB3aXRoIGFkYXB0aXZlIHN0cm9rZSB0aGlja25lc3NcbiAgICogYmV0d2VlbiB0d28gcG9pbnRzXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IGN1cnJlbnQgWCBjb29yZGluYXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IGN1cnJlbnQgWSBjb29yZGluYXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwcmV2WCBwcmV2aW91cyBYIGNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHByZXZZIHByZXZpb3VzIFkgY29vcmRpbmF0ZVxuICAgKi9cbiAgZHJhdyh4LCB5LCBwcmV2WCwgcHJldlkpIHtcbiAgICBpZiAodGhpcy5yZWNvcmRTdHJva2VzKSB7XG4gICAgICB0aGlzLnN0cm9rZU1lbW9yeS5wdXNoKHsgcG9pbnQ6IG5ldyBQb2ludCh4LCB5KSwgdGltZTogcGVyZm9ybWFuY2Uubm93KCkgLSB0aGlzLnN0cm9rZVRpbWVzdGFtcCB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGNvbnRleHQgfSA9IHRoaXM7XG4gICAgLy8gY2FsY3VsYXRlIGRpc3RhbmNlIGZyb20gcHJldmlvdXMgcG9pbnRcbiAgICBjb25zdCByYXdEaXN0ID0gUGl4ZWxzLmxpbmVEaXN0YW5jZSh4LCB5LCBwcmV2WCwgcHJldlkpO1xuXG4gICAgLy8gbm93LCBoZXJlIHdlIHNjYWxlIHRoZSBpbml0aWFsIHNtb290aGluZyBmYWN0b3IgYnkgdGhlIHJhdyBkaXN0YW5jZVxuICAgIC8vIHRoaXMgbWVhbnMgdGhhdCB3aGVuIHRoZSBtb3VzZSBtb3ZlcyBmYXN0LCB0aGVyZSBpcyBtb3JlIHNtb290aGluZ1xuICAgIC8vIGFuZCB3aGVuIHdlJ3JlIGRyYXdpbmcgc21hbGwgZGV0YWlsZWQgc3R1ZmYsIHdlIGhhdmUgbW9yZSBjb250cm9sXG4gICAgLy8gYWxzbyB3ZSBoYXJkIGNsaXAgYXQgMVxuICAgIGNvbnN0IHNtb290aGluZ0ZhY3RvciA9IE1hdGgubWluKENvbnN0YW50cy5taW5TbW9vdGhpbmdGYWN0b3IsIHRoaXMuc21vb3RoaW5nICsgKHJhd0Rpc3QgLSA2MCkgLyAzMDAwKTtcblxuICAgIC8vIGNhbGN1bGF0ZSBwcm9jZXNzZWQgY29vcmRpbmF0ZXNcbiAgICBjb25zdCBwcm9jWCA9IHggLSAoeCAtIHByZXZYKSAqIHNtb290aGluZ0ZhY3RvcjtcbiAgICBjb25zdCBwcm9jWSA9IHkgLSAoeSAtIHByZXZZKSAqIHNtb290aGluZ0ZhY3RvcjtcblxuICAgIC8vIHJlY2FsY3VsYXRlIGRpc3RhbmNlIGZyb20gcHJldmlvdXMgcG9pbnQsIHRoaXMgdGltZSByZWxhdGl2ZSB0byB0aGUgc21vb3RoZWQgY29vcmRzXG4gICAgY29uc3QgZGlzdCA9IFBpeGVscy5saW5lRGlzdGFuY2UocHJvY1gsIHByb2NZLCBwcmV2WCwgcHJldlkpO1xuXG4gICAgaWYgKHRoaXMuYWRhcHRpdmVTdHJva2UpIHtcbiAgICAgIC8vIGNhbGN1bGF0ZSB0YXJnZXQgdGhpY2tuZXNzIGJhc2VkIG9uIHRoZSBuZXcgZGlzdGFuY2VcbiAgICAgIHRoaXMuX3RhcmdldFRoaWNrbmVzcyA9IChkaXN0IC0gQ29uc3RhbnRzLm1pbkxpbmVUaGlja25lc3MpXG4gICAgICAgIC8gQ29uc3RhbnRzLmxpbmVUaGlja25lc3NSYW5nZSAqICh0aGlzLl9tYXhXZWlnaHQgLSB0aGlzLl93ZWlnaHQpICsgdGhpcy5fd2VpZ2h0O1xuICAgICAgLy8gYXBwcm9hY2ggdGhlIHRhcmdldCBncmFkdWFsbHlcbiAgICAgIGlmICh0aGlzLl90aGlja25lc3MgPiB0aGlzLl90YXJnZXRUaGlja25lc3MpIHtcbiAgICAgICAgdGhpcy5fdGhpY2tuZXNzIC09IENvbnN0YW50cy50aGlja25lc3NJbmNyZW1lbnQ7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0aGlzLl90aGlja25lc3MgPCB0aGlzLl90YXJnZXRUaGlja25lc3MpIHtcbiAgICAgICAgdGhpcy5fdGhpY2tuZXNzICs9IENvbnN0YW50cy50aGlja25lc3NJbmNyZW1lbnQ7XG4gICAgICB9XG4gICAgICAvLyBzZXQgbGluZSB3aWR0aFxuICAgICAgY29udGV4dC5saW5lV2lkdGggPSB0aGlzLl90aGlja25lc3M7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gbGluZSB3aWR0aCBpcyBlcXVhbCB0byBkZWZhdWx0IHdlaWdodFxuICAgICAgY29udGV4dC5saW5lV2lkdGggPSB0aGlzLl93ZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8gZHJhdyB1c2luZyBxdWFkIGludGVycG9sYXRpb25cbiAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8ocHJldlgsIHByZXZZLCBwcm9jWCwgcHJvY1kpO1xuICAgIGNvbnRleHQuc3Ryb2tlKCk7XG5cbiAgICByZXR1cm4geyB4OiBwcm9jWCwgeTogcHJvY1kgfTtcbiAgfVxuXG4gIGdldCBjb2xvcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LnN0cm9rZVN0eWxlO1xuICB9XG5cbiAgc2V0IGNvbG9yKGMpIHtcbiAgICBpZiAodHlwZW9mIGMgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIGFyZ3VtZW50IHR5cGUnKTtcbiAgICB0aGlzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjO1xuICB9XG5cbiAgZ2V0IHdlaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy5fd2VpZ2h0O1xuICB9XG5cbiAgc2V0IHdlaWdodCh3KSB7XG4gICAgaWYgKHR5cGVvZiB3ICE9PSAnbnVtYmVyJykgdGhyb3cgbmV3IEVycm9yKCd3cm9uZyBhcmd1bWVudCB0eXBlJyk7XG4gICAgdGhpcy5fd2VpZ2h0ID0gdztcbiAgICB0aGlzLl90aGlja25lc3MgPSB3O1xuICAgIHRoaXMuX3RhcmdldFRoaWNrbmVzcyA9IHc7XG4gICAgdGhpcy5fbWF4V2VpZ2h0ID0gdyArIENvbnN0YW50cy53ZWlnaHRTcHJlYWQ7XG4gIH1cblxuICBnZXQgbW9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbW9kZTtcbiAgfVxuXG4gIHNldCBtb2RlKG0pIHtcbiAgICBpZiAodHlwZW9mIG0gIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIGFyZ3VtZW50IHR5cGUnKTtcbiAgICBzd2l0Y2ggKG0pIHtcbiAgICAgIGNhc2UgRHJhd2luZ01vZGUuRVJBU0U6XG4gICAgICAgIHRoaXMuX21vZGUgPSBEcmF3aW5nTW9kZS5FUkFTRTtcbiAgICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1vdXQnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRHJhd2luZ01vZGUuRklMTDpcbiAgICAgICAgdGhpcy5fbW9kZSA9IERyYXdpbmdNb2RlLkZJTEw7XG4gICAgICAgIHRoaXMuY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRHJhd2luZ01vZGUuRElTQUJMRUQ6XG4gICAgICAgIHRoaXMuX21vZGUgPSBEcmF3aW5nTW9kZS5ESVNBQkxFRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLl9tb2RlID0gRHJhd2luZ01vZGUuRFJBVztcbiAgICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlzRGlydHkoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5fZGlydHk7XG4gIH1cblxuICBmaXJlRGlydHkoKSB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdkaXJ0eScpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlydHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9kaXJ0eSA9IGZhbHNlO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCgnY2xlYW4nKTtcblxuICAgIC8vIG1ha2Ugc3VyZSB3ZSdyZSBpbiB0aGUgcmlnaHQgY29tcG9zaXRpbmcgbW9kZSwgYW5kIGVyYXNlIGV2ZXJ5dGhpbmdcbiAgICBpZiAodGhpcy5tb2RlID09PSBEcmF3aW5nTW9kZS5FUkFTRSkge1xuICAgICAgdGhpcy5tb2RlID0gRHJhd2luZ01vZGUuRFJBVztcbiAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoLTEwLCAtMTAsIHRoaXMuY2FudmFzLndpZHRoICsgMjAsIHRoaXMuY2FudmFzLmhlaWdodCArIDIwKTtcbiAgICAgIHRoaXMubW9kZSA9IERyYXdpbmdNb2RlLkVSQVNFO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoLTEwLCAtMTAsIHRoaXMuY2FudmFzLndpZHRoICsgMjAsIHRoaXMuY2FudmFzLmhlaWdodCArIDIwKTtcbiAgICB9XG4gIH1cblxuICB0b0ltYWdlKCkge1xuICAgIHJldHVybiB0aGlzLmNhbnZhcy50b0RhdGFVUkwoKTtcbiAgfVxuXG4gIGZpbGwoKSB7XG4gICAgY29uc3QgeyBtb3VzZSB9ID0gdGhpcztcbiAgICBjb25zdCB7IGNvbnRleHQgfSA9IHRoaXM7XG4gICAgLy8gY29udmVydGluZyB0byBBcnJheSBiZWNhdXNlIFNhZmFyaSA5XG4gICAgY29uc3Qgc3RhcnRDb2xvciA9IEFycmF5LmZyb20oY29udGV4dC5nZXRJbWFnZURhdGEobW91c2UueCwgbW91c2UueSwgMSwgMSkuZGF0YSk7XG5cbiAgICBpZiAoIXRoaXMuX2ZpbGxpbmcpIHtcbiAgICAgIGNvbnN0IHsgeCwgeSB9ID0gbW91c2U7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ2ZpbGxzdGFydCcsIHsgeCwgeSB9KTtcbiAgICAgIHRoaXMuX2ZpbGxpbmcgPSB0cnVlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuX2Zsb29kRmlsbChtb3VzZS54LCBtb3VzZS55LCBzdGFydENvbG9yKTsgfSwgQ29uc3RhbnRzLmZsb29kRmlsbEludGVydmFsKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9maWxsU3RhY2sucHVzaChbXG4gICAgICAgIG1vdXNlLngsXG4gICAgICAgIG1vdXNlLnksXG4gICAgICAgIHN0YXJ0Q29sb3JcbiAgICAgIF0pO1xuICAgIH1cbiAgfVxuXG4gIF9mbG9vZEZpbGwoX3N0YXJ0WCwgX3N0YXJ0WSwgc3RhcnRDb2xvcikge1xuICAgIGNvbnN0IHsgY29udGV4dCB9ID0gdGhpcztcbiAgICBjb25zdCBzdGFydFggPSBNYXRoLmZsb29yKF9zdGFydFgpO1xuICAgIGNvbnN0IHN0YXJ0WSA9IE1hdGguZmxvb3IoX3N0YXJ0WSk7XG4gICAgY29uc3QgY2FudmFzV2lkdGggPSBjb250ZXh0LmNhbnZhcy53aWR0aDtcbiAgICBjb25zdCBjYW52YXNIZWlnaHQgPSBjb250ZXh0LmNhbnZhcy5oZWlnaHQ7XG4gICAgY29uc3QgcGl4ZWxTdGFjayA9IFtbc3RhcnRYLCBzdGFydFldXTtcbiAgICAvLyBoZXggbmVlZHMgdG8gYmUgdHJhc2Zvcm1lZCB0byByZ2Igc2luY2UgY29sb3JMYXllciBhY2NlcHRzIFJHQlxuICAgIGNvbnN0IGZpbGxDb2xvciA9IFBpeGVscy5oZXhUb1JnYih0aGlzLmNvbG9yKTtcbiAgICAvLyBOZWVkIHRvIHNhdmUgY3VycmVudCBjb250ZXh0IHdpdGggY29sb3JzLCB3ZSB3aWxsIHVwZGF0ZSBpdFxuICAgIGNvbnN0IGNvbG9yTGF5ZXIgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBjb250ZXh0LmNhbnZhcy53aWR0aCwgY29udGV4dC5jYW52YXMuaGVpZ2h0KTtcbiAgICBjb25zdCBhbHBoYSA9IE1hdGgubWluKGNvbnRleHQuZ2xvYmFsQWxwaGEgKiAxMCAqIDI1NSwgMjU1KTtcbiAgICBjb25zdCBjb2xvclBpeGVsID0gUGl4ZWxzLmNvbG9yUGl4ZWwoY29sb3JMYXllci5kYXRhLCAuLi5maWxsQ29sb3IsIHN0YXJ0Q29sb3IsIGFscGhhKTtcbiAgICBjb25zdCBtYXRjaENvbG9yID0gUGl4ZWxzLm1hdGNoQ29sb3IoY29sb3JMYXllci5kYXRhLCAuLi5zdGFydENvbG9yKTtcbiAgICBjb25zdCBtYXRjaEZpbGxDb2xvciA9IFBpeGVscy5tYXRjaENvbG9yKGNvbG9yTGF5ZXIuZGF0YSwgLi4uWy4uLmZpbGxDb2xvciwgMjU1XSk7XG5cbiAgICAvLyBjaGVjayBpZiB3ZSdyZSB0cnlpbmcgdG8gZmlsbCB3aXRoIHRoZSBzYW1lIGNvbG91ciwgaWYgc28sIHN0b3BcbiAgICBpZiAobWF0Y2hGaWxsQ29sb3IoKHN0YXJ0WSAqIGNvbnRleHQuY2FudmFzLndpZHRoICsgc3RhcnRYKSAqIDQpKSB7XG4gICAgICB0aGlzLl9maWxsaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ2ZpbGxlbmQnLCB7fSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2hpbGUgKHBpeGVsU3RhY2subGVuZ3RoKSB7XG4gICAgICBjb25zdCBuZXdQb3MgPSBwaXhlbFN0YWNrLnBvcCgpO1xuICAgICAgY29uc3QgeCA9IG5ld1Bvc1swXTtcbiAgICAgIGxldCB5ID0gbmV3UG9zWzFdO1xuXG4gICAgICBsZXQgcGl4ZWxQb3MgPSAoeSAqIGNhbnZhc1dpZHRoICsgeCkgKiA0O1xuXG4gICAgICB3aGlsZSAoeS0tID49IDAgJiYgbWF0Y2hDb2xvcihwaXhlbFBvcykpIHtcbiAgICAgICAgcGl4ZWxQb3MgLT0gY2FudmFzV2lkdGggKiA0O1xuICAgICAgfVxuICAgICAgcGl4ZWxQb3MgKz0gY2FudmFzV2lkdGggKiA0O1xuXG4gICAgICArK3k7XG5cbiAgICAgIGxldCByZWFjaExlZnQgPSBmYWxzZTtcbiAgICAgIGxldCByZWFjaFJpZ2h0ID0gZmFsc2U7XG5cbiAgICAgIHdoaWxlICh5KysgPCBjYW52YXNIZWlnaHQgLSAxICYmIG1hdGNoQ29sb3IocGl4ZWxQb3MpKSB7XG4gICAgICAgIGNvbG9yUGl4ZWwocGl4ZWxQb3MpO1xuXG4gICAgICAgIGlmICh4ID4gMCkge1xuICAgICAgICAgIGlmIChtYXRjaENvbG9yKHBpeGVsUG9zIC0gNCkpIHtcbiAgICAgICAgICAgIGlmICghcmVhY2hMZWZ0KSB7XG4gICAgICAgICAgICAgIHBpeGVsU3RhY2sucHVzaChbeCAtIDEsIHldKTtcbiAgICAgICAgICAgICAgcmVhY2hMZWZ0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAocmVhY2hMZWZ0KSB7XG4gICAgICAgICAgICByZWFjaExlZnQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoeCA8IGNhbnZhc1dpZHRoIC0gMSkge1xuICAgICAgICAgIGlmIChtYXRjaENvbG9yKHBpeGVsUG9zICsgNCkpIHtcbiAgICAgICAgICAgIGlmICghcmVhY2hSaWdodCkge1xuICAgICAgICAgICAgICBwaXhlbFN0YWNrLnB1c2goW3ggKyAxLCB5XSk7XG4gICAgICAgICAgICAgIHJlYWNoUmlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChyZWFjaFJpZ2h0KSB7XG4gICAgICAgICAgICByZWFjaFJpZ2h0ID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcGl4ZWxQb3MgKz0gY2FudmFzV2lkdGggKiA0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBjb250ZXh0IHdpdGggZmlsbGVkIGJ1Y2tldCFcbiAgICBjb250ZXh0LnB1dEltYWdlRGF0YShjb2xvckxheWVyLCAwLCAwKTtcblxuICAgIGlmICh0aGlzLl9maWxsU3RhY2subGVuZ3RoKSB7XG4gICAgICB0aGlzLl9mbG9vZEZpbGwoLi4udGhpcy5fZmlsbFN0YWNrLnNoaWZ0KCkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuX2ZpbGxpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCgnZmlsbGVuZCcsIHt9KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgQXRyYW1lbnQgfTtcbiIsImV4cG9ydCB7IEF0cmFtZW50IH0gZnJvbSAnLi9zcmMvYXRyYW1lbnQnO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==